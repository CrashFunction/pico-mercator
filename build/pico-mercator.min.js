/*! 
The MIT License (MIT)

Copyright (c) 2019 Tarek Sherif

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the "Software"), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

 */
!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PicoMercator=t():n.PicoMercator=t()}(window,(function(){return function(n){var t={};function r(a){if(t[a])return t[a].exports;var u=t[a]={i:a,l:!1,exports:{}};return n[a].call(u.exports,u,u.exports,r),u.l=!0,u.exports}return r.m=n,r.c=t,r.d=function(n,t,a){r.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:a})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,t){if(1&t&&(n=r(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var u in n)r.d(a,u,function(t){return n[t]}.bind(null,u));return a},r.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(t,"a",t),t},r.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},r.p="",r(r.s=6)}({6:function(n,t,r){"use strict";r.r(t);var a={};r.r(a),r.d(a,"create",(function(){return f})),r.d(a,"clone",(function(){return M})),r.d(a,"copy",(function(){return h})),r.d(a,"fromValues",(function(){return s})),r.d(a,"set",(function(){return d})),r.d(a,"identity",(function(){return l})),r.d(a,"transpose",(function(){return v})),r.d(a,"invert",(function(){return m})),r.d(a,"adjoint",(function(){return b})),r.d(a,"determinant",(function(){return p})),r.d(a,"multiply",(function(){return P})),r.d(a,"translate",(function(){return C})),r.d(a,"scale",(function(){return O})),r.d(a,"rotate",(function(){return R})),r.d(a,"rotateX",(function(){return _})),r.d(a,"rotateY",(function(){return g})),r.d(a,"rotateZ",(function(){return y})),r.d(a,"fromTranslation",(function(){return x})),r.d(a,"fromScaling",(function(){return A})),r.d(a,"fromRotation",(function(){return T})),r.d(a,"fromXRotation",(function(){return I})),r.d(a,"fromYRotation",(function(){return E})),r.d(a,"fromZRotation",(function(){return w})),r.d(a,"fromRotationTranslation",(function(){return L})),r.d(a,"fromQuat2",(function(){return q})),r.d(a,"getTranslation",(function(){return j})),r.d(a,"getScaling",(function(){return S})),r.d(a,"getRotation",(function(){return D})),r.d(a,"fromRotationTranslationScale",(function(){return F})),r.d(a,"fromRotationTranslationScaleOrigin",(function(){return W})),r.d(a,"fromQuat",(function(){return z})),r.d(a,"frustum",(function(){return Z})),r.d(a,"perspective",(function(){return V})),r.d(a,"perspectiveFromFieldOfView",(function(){return Q})),r.d(a,"ortho",(function(){return X})),r.d(a,"lookAt",(function(){return Y})),r.d(a,"targetTo",(function(){return H})),r.d(a,"str",(function(){return k})),r.d(a,"frob",(function(){return G})),r.d(a,"add",(function(){return U})),r.d(a,"subtract",(function(){return B})),r.d(a,"multiplyScalar",(function(){return J})),r.d(a,"multiplyScalarAndAdd",(function(){return K})),r.d(a,"exactEquals",(function(){return N})),r.d(a,"equals",(function(){return $})),r.d(a,"mul",(function(){return nn})),r.d(a,"sub",(function(){return tn}));var u={};r.r(u),r.d(u,"create",(function(){return rn})),r.d(u,"clone",(function(){return an})),r.d(u,"length",(function(){return un})),r.d(u,"fromValues",(function(){return en})),r.d(u,"copy",(function(){return on})),r.d(u,"set",(function(){return cn})),r.d(u,"add",(function(){return fn})),r.d(u,"subtract",(function(){return Mn})),r.d(u,"multiply",(function(){return hn})),r.d(u,"divide",(function(){return sn})),r.d(u,"ceil",(function(){return dn})),r.d(u,"floor",(function(){return ln})),r.d(u,"min",(function(){return vn})),r.d(u,"max",(function(){return mn})),r.d(u,"round",(function(){return bn})),r.d(u,"scale",(function(){return pn})),r.d(u,"scaleAndAdd",(function(){return Pn})),r.d(u,"distance",(function(){return Cn})),r.d(u,"squaredDistance",(function(){return On})),r.d(u,"squaredLength",(function(){return Rn})),r.d(u,"negate",(function(){return _n})),r.d(u,"inverse",(function(){return gn})),r.d(u,"normalize",(function(){return yn})),r.d(u,"dot",(function(){return xn})),r.d(u,"cross",(function(){return An})),r.d(u,"lerp",(function(){return Tn})),r.d(u,"hermite",(function(){return In})),r.d(u,"bezier",(function(){return En})),r.d(u,"random",(function(){return wn})),r.d(u,"transformMat4",(function(){return Ln})),r.d(u,"transformMat3",(function(){return qn})),r.d(u,"transformQuat",(function(){return jn})),r.d(u,"rotateX",(function(){return Sn})),r.d(u,"rotateY",(function(){return Dn})),r.d(u,"rotateZ",(function(){return Fn})),r.d(u,"angle",(function(){return Wn})),r.d(u,"zero",(function(){return zn})),r.d(u,"str",(function(){return Zn})),r.d(u,"exactEquals",(function(){return Vn})),r.d(u,"equals",(function(){return Qn})),r.d(u,"sub",(function(){return Yn})),r.d(u,"mul",(function(){return Hn})),r.d(u,"div",(function(){return kn})),r.d(u,"dist",(function(){return Gn})),r.d(u,"sqrDist",(function(){return Un})),r.d(u,"len",(function(){return Bn})),r.d(u,"sqrLen",(function(){return Jn})),r.d(u,"forEach",(function(){return Kn}));var e={};r.r(e),r.d(e,"create",(function(){return Nn})),r.d(e,"clone",(function(){return $n})),r.d(e,"fromValues",(function(){return nt})),r.d(e,"copy",(function(){return tt})),r.d(e,"set",(function(){return rt})),r.d(e,"add",(function(){return at})),r.d(e,"subtract",(function(){return ut})),r.d(e,"multiply",(function(){return et})),r.d(e,"divide",(function(){return ot})),r.d(e,"ceil",(function(){return it})),r.d(e,"floor",(function(){return ct})),r.d(e,"min",(function(){return ft})),r.d(e,"max",(function(){return Mt})),r.d(e,"round",(function(){return ht})),r.d(e,"scale",(function(){return st})),r.d(e,"scaleAndAdd",(function(){return dt})),r.d(e,"distance",(function(){return lt})),r.d(e,"squaredDistance",(function(){return vt})),r.d(e,"length",(function(){return mt})),r.d(e,"squaredLength",(function(){return bt})),r.d(e,"negate",(function(){return pt})),r.d(e,"inverse",(function(){return Pt})),r.d(e,"normalize",(function(){return Ct})),r.d(e,"dot",(function(){return Ot})),r.d(e,"cross",(function(){return Rt})),r.d(e,"lerp",(function(){return _t})),r.d(e,"random",(function(){return gt})),r.d(e,"transformMat4",(function(){return yt})),r.d(e,"transformQuat",(function(){return xt})),r.d(e,"zero",(function(){return At})),r.d(e,"str",(function(){return Tt})),r.d(e,"exactEquals",(function(){return It})),r.d(e,"equals",(function(){return Et})),r.d(e,"sub",(function(){return wt})),r.d(e,"mul",(function(){return Lt})),r.d(e,"div",(function(){return qt})),r.d(e,"dist",(function(){return jt})),r.d(e,"sqrDist",(function(){return St})),r.d(e,"len",(function(){return Dt})),r.d(e,"sqrLen",(function(){return Ft})),r.d(e,"forEach",(function(){return Wt}));var o=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,c=Math.random;Math.PI;function f(){var n=new i(16);return i!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function M(n){var t=new i(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function h(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function s(n,t,r,a,u,e,o,c,f,M,h,s,d,l,v,m){var b=new i(16);return b[0]=n,b[1]=t,b[2]=r,b[3]=a,b[4]=u,b[5]=e,b[6]=o,b[7]=c,b[8]=f,b[9]=M,b[10]=h,b[11]=s,b[12]=d,b[13]=l,b[14]=v,b[15]=m,b}function d(n,t,r,a,u,e,o,i,c,f,M,h,s,d,l,v,m){return n[0]=t,n[1]=r,n[2]=a,n[3]=u,n[4]=e,n[5]=o,n[6]=i,n[7]=c,n[8]=f,n[9]=M,n[10]=h,n[11]=s,n[12]=d,n[13]=l,n[14]=v,n[15]=m,n}function l(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function v(n,t){if(n===t){var r=t[1],a=t[2],u=t[3],e=t[6],o=t[7],i=t[11];n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=r,n[6]=t[9],n[7]=t[13],n[8]=a,n[9]=e,n[11]=t[14],n[12]=u,n[13]=o,n[14]=i}else n[0]=t[0],n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=t[1],n[5]=t[5],n[6]=t[9],n[7]=t[13],n[8]=t[2],n[9]=t[6],n[10]=t[10],n[11]=t[14],n[12]=t[3],n[13]=t[7],n[14]=t[11],n[15]=t[15];return n}function m(n,t){var r=t[0],a=t[1],u=t[2],e=t[3],o=t[4],i=t[5],c=t[6],f=t[7],M=t[8],h=t[9],s=t[10],d=t[11],l=t[12],v=t[13],m=t[14],b=t[15],p=r*i-a*o,P=r*c-u*o,C=r*f-e*o,O=a*c-u*i,R=a*f-e*i,_=u*f-e*c,g=M*v-h*l,y=M*m-s*l,x=M*b-d*l,A=h*m-s*v,T=h*b-d*v,I=s*b-d*m,E=p*I-P*T+C*A+O*x-R*y+_*g;return E?(E=1/E,n[0]=(i*I-c*T+f*A)*E,n[1]=(u*T-a*I-e*A)*E,n[2]=(v*_-m*R+b*O)*E,n[3]=(s*R-h*_-d*O)*E,n[4]=(c*x-o*I-f*y)*E,n[5]=(r*I-u*x+e*y)*E,n[6]=(m*C-l*_-b*P)*E,n[7]=(M*_-s*C+d*P)*E,n[8]=(o*T-i*x+f*g)*E,n[9]=(a*x-r*T-e*g)*E,n[10]=(l*R-v*C+b*p)*E,n[11]=(h*C-M*R-d*p)*E,n[12]=(i*y-o*A-c*g)*E,n[13]=(r*A-a*y+u*g)*E,n[14]=(v*P-l*O-m*p)*E,n[15]=(M*O-h*P+s*p)*E,n):null}function b(n,t){var r=t[0],a=t[1],u=t[2],e=t[3],o=t[4],i=t[5],c=t[6],f=t[7],M=t[8],h=t[9],s=t[10],d=t[11],l=t[12],v=t[13],m=t[14],b=t[15];return n[0]=i*(s*b-d*m)-h*(c*b-f*m)+v*(c*d-f*s),n[1]=-(a*(s*b-d*m)-h*(u*b-e*m)+v*(u*d-e*s)),n[2]=a*(c*b-f*m)-i*(u*b-e*m)+v*(u*f-e*c),n[3]=-(a*(c*d-f*s)-i*(u*d-e*s)+h*(u*f-e*c)),n[4]=-(o*(s*b-d*m)-M*(c*b-f*m)+l*(c*d-f*s)),n[5]=r*(s*b-d*m)-M*(u*b-e*m)+l*(u*d-e*s),n[6]=-(r*(c*b-f*m)-o*(u*b-e*m)+l*(u*f-e*c)),n[7]=r*(c*d-f*s)-o*(u*d-e*s)+M*(u*f-e*c),n[8]=o*(h*b-d*v)-M*(i*b-f*v)+l*(i*d-f*h),n[9]=-(r*(h*b-d*v)-M*(a*b-e*v)+l*(a*d-e*h)),n[10]=r*(i*b-f*v)-o*(a*b-e*v)+l*(a*f-e*i),n[11]=-(r*(i*d-f*h)-o*(a*d-e*h)+M*(a*f-e*i)),n[12]=-(o*(h*m-s*v)-M*(i*m-c*v)+l*(i*s-c*h)),n[13]=r*(h*m-s*v)-M*(a*m-u*v)+l*(a*s-u*h),n[14]=-(r*(i*m-c*v)-o*(a*m-u*v)+l*(a*c-u*i)),n[15]=r*(i*s-c*h)-o*(a*s-u*h)+M*(a*c-u*i),n}function p(n){var t=n[0],r=n[1],a=n[2],u=n[3],e=n[4],o=n[5],i=n[6],c=n[7],f=n[8],M=n[9],h=n[10],s=n[11],d=n[12],l=n[13],v=n[14],m=n[15];return(t*o-r*e)*(h*m-s*v)-(t*i-a*e)*(M*m-s*l)+(t*c-u*e)*(M*v-h*l)+(r*i-a*o)*(f*m-s*d)-(r*c-u*o)*(f*v-h*d)+(a*c-u*i)*(f*l-M*d)}function P(n,t,r){var a=t[0],u=t[1],e=t[2],o=t[3],i=t[4],c=t[5],f=t[6],M=t[7],h=t[8],s=t[9],d=t[10],l=t[11],v=t[12],m=t[13],b=t[14],p=t[15],P=r[0],C=r[1],O=r[2],R=r[3];return n[0]=P*a+C*i+O*h+R*v,n[1]=P*u+C*c+O*s+R*m,n[2]=P*e+C*f+O*d+R*b,n[3]=P*o+C*M+O*l+R*p,P=r[4],C=r[5],O=r[6],R=r[7],n[4]=P*a+C*i+O*h+R*v,n[5]=P*u+C*c+O*s+R*m,n[6]=P*e+C*f+O*d+R*b,n[7]=P*o+C*M+O*l+R*p,P=r[8],C=r[9],O=r[10],R=r[11],n[8]=P*a+C*i+O*h+R*v,n[9]=P*u+C*c+O*s+R*m,n[10]=P*e+C*f+O*d+R*b,n[11]=P*o+C*M+O*l+R*p,P=r[12],C=r[13],O=r[14],R=r[15],n[12]=P*a+C*i+O*h+R*v,n[13]=P*u+C*c+O*s+R*m,n[14]=P*e+C*f+O*d+R*b,n[15]=P*o+C*M+O*l+R*p,n}function C(n,t,r){var a,u,e,o,i,c,f,M,h,s,d,l,v=r[0],m=r[1],b=r[2];return t===n?(n[12]=t[0]*v+t[4]*m+t[8]*b+t[12],n[13]=t[1]*v+t[5]*m+t[9]*b+t[13],n[14]=t[2]*v+t[6]*m+t[10]*b+t[14],n[15]=t[3]*v+t[7]*m+t[11]*b+t[15]):(a=t[0],u=t[1],e=t[2],o=t[3],i=t[4],c=t[5],f=t[6],M=t[7],h=t[8],s=t[9],d=t[10],l=t[11],n[0]=a,n[1]=u,n[2]=e,n[3]=o,n[4]=i,n[5]=c,n[6]=f,n[7]=M,n[8]=h,n[9]=s,n[10]=d,n[11]=l,n[12]=a*v+i*m+h*b+t[12],n[13]=u*v+c*m+s*b+t[13],n[14]=e*v+f*m+d*b+t[14],n[15]=o*v+M*m+l*b+t[15]),n}function O(n,t,r){var a=r[0],u=r[1],e=r[2];return n[0]=t[0]*a,n[1]=t[1]*a,n[2]=t[2]*a,n[3]=t[3]*a,n[4]=t[4]*u,n[5]=t[5]*u,n[6]=t[6]*u,n[7]=t[7]*u,n[8]=t[8]*e,n[9]=t[9]*e,n[10]=t[10]*e,n[11]=t[11]*e,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function R(n,t,r,a){var u,e,i,c,f,M,h,s,d,l,v,m,b,p,P,C,O,R,_,g,y,x,A,T,I=a[0],E=a[1],w=a[2],L=Math.hypot(I,E,w);return L<o?null:(I*=L=1/L,E*=L,w*=L,u=Math.sin(r),i=1-(e=Math.cos(r)),c=t[0],f=t[1],M=t[2],h=t[3],s=t[4],d=t[5],l=t[6],v=t[7],m=t[8],b=t[9],p=t[10],P=t[11],C=I*I*i+e,O=E*I*i+w*u,R=w*I*i-E*u,_=I*E*i-w*u,g=E*E*i+e,y=w*E*i+I*u,x=I*w*i+E*u,A=E*w*i-I*u,T=w*w*i+e,n[0]=c*C+s*O+m*R,n[1]=f*C+d*O+b*R,n[2]=M*C+l*O+p*R,n[3]=h*C+v*O+P*R,n[4]=c*_+s*g+m*y,n[5]=f*_+d*g+b*y,n[6]=M*_+l*g+p*y,n[7]=h*_+v*g+P*y,n[8]=c*x+s*A+m*T,n[9]=f*x+d*A+b*T,n[10]=M*x+l*A+p*T,n[11]=h*x+v*A+P*T,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n)}function _(n,t,r){var a=Math.sin(r),u=Math.cos(r),e=t[4],o=t[5],i=t[6],c=t[7],f=t[8],M=t[9],h=t[10],s=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=e*u+f*a,n[5]=o*u+M*a,n[6]=i*u+h*a,n[7]=c*u+s*a,n[8]=f*u-e*a,n[9]=M*u-o*a,n[10]=h*u-i*a,n[11]=s*u-c*a,n}function g(n,t,r){var a=Math.sin(r),u=Math.cos(r),e=t[0],o=t[1],i=t[2],c=t[3],f=t[8],M=t[9],h=t[10],s=t[11];return t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=e*u-f*a,n[1]=o*u-M*a,n[2]=i*u-h*a,n[3]=c*u-s*a,n[8]=e*a+f*u,n[9]=o*a+M*u,n[10]=i*a+h*u,n[11]=c*a+s*u,n}function y(n,t,r){var a=Math.sin(r),u=Math.cos(r),e=t[0],o=t[1],i=t[2],c=t[3],f=t[4],M=t[5],h=t[6],s=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=e*u+f*a,n[1]=o*u+M*a,n[2]=i*u+h*a,n[3]=c*u+s*a,n[4]=f*u-e*a,n[5]=M*u-o*a,n[6]=h*u-i*a,n[7]=s*u-c*a,n}function x(n,t){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n}function A(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=t[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=t[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function T(n,t,r){var a,u,e,i=r[0],c=r[1],f=r[2],M=Math.hypot(i,c,f);return M<o?null:(i*=M=1/M,c*=M,f*=M,a=Math.sin(t),e=1-(u=Math.cos(t)),n[0]=i*i*e+u,n[1]=c*i*e+f*a,n[2]=f*i*e-c*a,n[3]=0,n[4]=i*c*e-f*a,n[5]=c*c*e+u,n[6]=f*c*e+i*a,n[7]=0,n[8]=i*f*e+c*a,n[9]=c*f*e-i*a,n[10]=f*f*e+u,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}function I(n,t){var r=Math.sin(t),a=Math.cos(t);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=r,n[7]=0,n[8]=0,n[9]=-r,n[10]=a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function E(n,t){var r=Math.sin(t),a=Math.cos(t);return n[0]=a,n[1]=0,n[2]=-r,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=r,n[9]=0,n[10]=a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function w(n,t){var r=Math.sin(t),a=Math.cos(t);return n[0]=a,n[1]=r,n[2]=0,n[3]=0,n[4]=-r,n[5]=a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function L(n,t,r){var a=t[0],u=t[1],e=t[2],o=t[3],i=a+a,c=u+u,f=e+e,M=a*i,h=a*c,s=a*f,d=u*c,l=u*f,v=e*f,m=o*i,b=o*c,p=o*f;return n[0]=1-(d+v),n[1]=h+p,n[2]=s-b,n[3]=0,n[4]=h-p,n[5]=1-(M+v),n[6]=l+m,n[7]=0,n[8]=s+b,n[9]=l-m,n[10]=1-(M+d),n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function q(n,t){var r=new i(3),a=-t[0],u=-t[1],e=-t[2],o=t[3],c=t[4],f=t[5],M=t[6],h=t[7],s=a*a+u*u+e*e+o*o;return s>0?(r[0]=2*(c*o+h*a+f*e-M*u)/s,r[1]=2*(f*o+h*u+M*a-c*e)/s,r[2]=2*(M*o+h*e+c*u-f*a)/s):(r[0]=2*(c*o+h*a+f*e-M*u),r[1]=2*(f*o+h*u+M*a-c*e),r[2]=2*(M*o+h*e+c*u-f*a)),L(n,t,r),n}function j(n,t){return n[0]=t[12],n[1]=t[13],n[2]=t[14],n}function S(n,t){var r=t[0],a=t[1],u=t[2],e=t[4],o=t[5],i=t[6],c=t[8],f=t[9],M=t[10];return n[0]=Math.hypot(r,a,u),n[1]=Math.hypot(e,o,i),n[2]=Math.hypot(c,f,M),n}function D(n,t){var r=new i(3);S(r,t);var a=1/r[0],u=1/r[1],e=1/r[2],o=t[0]*a,c=t[1]*u,f=t[2]*e,M=t[4]*a,h=t[5]*u,s=t[6]*e,d=t[8]*a,l=t[9]*u,v=t[10]*e,m=o+h+v,b=0;return m>0?(b=2*Math.sqrt(m+1),n[3]=.25*b,n[0]=(s-l)/b,n[1]=(d-f)/b,n[2]=(c-M)/b):o>h&&o>v?(b=2*Math.sqrt(1+o-h-v),n[3]=(s-l)/b,n[0]=.25*b,n[1]=(c+M)/b,n[2]=(d+f)/b):h>v?(b=2*Math.sqrt(1+h-o-v),n[3]=(d-f)/b,n[0]=(c+M)/b,n[1]=.25*b,n[2]=(s+l)/b):(b=2*Math.sqrt(1+v-o-h),n[3]=(c-M)/b,n[0]=(d+f)/b,n[1]=(s+l)/b,n[2]=.25*b),n}function F(n,t,r,a){var u=t[0],e=t[1],o=t[2],i=t[3],c=u+u,f=e+e,M=o+o,h=u*c,s=u*f,d=u*M,l=e*f,v=e*M,m=o*M,b=i*c,p=i*f,P=i*M,C=a[0],O=a[1],R=a[2];return n[0]=(1-(l+m))*C,n[1]=(s+P)*C,n[2]=(d-p)*C,n[3]=0,n[4]=(s-P)*O,n[5]=(1-(h+m))*O,n[6]=(v+b)*O,n[7]=0,n[8]=(d+p)*R,n[9]=(v-b)*R,n[10]=(1-(h+l))*R,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function W(n,t,r,a,u){var e=t[0],o=t[1],i=t[2],c=t[3],f=e+e,M=o+o,h=i+i,s=e*f,d=e*M,l=e*h,v=o*M,m=o*h,b=i*h,p=c*f,P=c*M,C=c*h,O=a[0],R=a[1],_=a[2],g=u[0],y=u[1],x=u[2],A=(1-(v+b))*O,T=(d+C)*O,I=(l-P)*O,E=(d-C)*R,w=(1-(s+b))*R,L=(m+p)*R,q=(l+P)*_,j=(m-p)*_,S=(1-(s+v))*_;return n[0]=A,n[1]=T,n[2]=I,n[3]=0,n[4]=E,n[5]=w,n[6]=L,n[7]=0,n[8]=q,n[9]=j,n[10]=S,n[11]=0,n[12]=r[0]+g-(A*g+E*y+q*x),n[13]=r[1]+y-(T*g+w*y+j*x),n[14]=r[2]+x-(I*g+L*y+S*x),n[15]=1,n}function z(n,t){var r=t[0],a=t[1],u=t[2],e=t[3],o=r+r,i=a+a,c=u+u,f=r*o,M=a*o,h=a*i,s=u*o,d=u*i,l=u*c,v=e*o,m=e*i,b=e*c;return n[0]=1-h-l,n[1]=M+b,n[2]=s-m,n[3]=0,n[4]=M-b,n[5]=1-f-l,n[6]=d+v,n[7]=0,n[8]=s+m,n[9]=d-v,n[10]=1-f-h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Z(n,t,r,a,u,e,o){var i=1/(r-t),c=1/(u-a),f=1/(e-o);return n[0]=2*e*i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*e*c,n[6]=0,n[7]=0,n[8]=(r+t)*i,n[9]=(u+a)*c,n[10]=(o+e)*f,n[11]=-1,n[12]=0,n[13]=0,n[14]=o*e*2*f,n[15]=0,n}function V(n,t,r,a,u){var e,o=1/Math.tan(t/2);return n[0]=o/r,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=u&&u!==1/0?(e=1/(a-u),n[10]=(u+a)*e,n[14]=2*u*a*e):(n[10]=-1,n[14]=-2*a),n}function Q(n,t,r,a){var u=Math.tan(t.upDegrees*Math.PI/180),e=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),i=Math.tan(t.rightDegrees*Math.PI/180),c=2/(o+i),f=2/(u+e);return n[0]=c,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=f,n[6]=0,n[7]=0,n[8]=-(o-i)*c*.5,n[9]=(u-e)*f*.5,n[10]=a/(r-a),n[11]=-1,n[12]=0,n[13]=0,n[14]=a*r/(r-a),n[15]=0,n}function X(n,t,r,a,u,e,o){var i=1/(t-r),c=1/(a-u),f=1/(e-o);return n[0]=-2*i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*f,n[11]=0,n[12]=(t+r)*i,n[13]=(u+a)*c,n[14]=(o+e)*f,n[15]=1,n}function Y(n,t,r,a){var u,e,i,c,f,M,h,s,d,v,m=t[0],b=t[1],p=t[2],P=a[0],C=a[1],O=a[2],R=r[0],_=r[1],g=r[2];return Math.abs(m-R)<o&&Math.abs(b-_)<o&&Math.abs(p-g)<o?l(n):(h=m-R,s=b-_,d=p-g,u=C*(d*=v=1/Math.hypot(h,s,d))-O*(s*=v),e=O*(h*=v)-P*d,i=P*s-C*h,(v=Math.hypot(u,e,i))?(u*=v=1/v,e*=v,i*=v):(u=0,e=0,i=0),c=s*i-d*e,f=d*u-h*i,M=h*e-s*u,(v=Math.hypot(c,f,M))?(c*=v=1/v,f*=v,M*=v):(c=0,f=0,M=0),n[0]=u,n[1]=c,n[2]=h,n[3]=0,n[4]=e,n[5]=f,n[6]=s,n[7]=0,n[8]=i,n[9]=M,n[10]=d,n[11]=0,n[12]=-(u*m+e*b+i*p),n[13]=-(c*m+f*b+M*p),n[14]=-(h*m+s*b+d*p),n[15]=1,n)}function H(n,t,r,a){var u=t[0],e=t[1],o=t[2],i=a[0],c=a[1],f=a[2],M=u-r[0],h=e-r[1],s=o-r[2],d=M*M+h*h+s*s;d>0&&(M*=d=1/Math.sqrt(d),h*=d,s*=d);var l=c*s-f*h,v=f*M-i*s,m=i*h-c*M;return(d=l*l+v*v+m*m)>0&&(l*=d=1/Math.sqrt(d),v*=d,m*=d),n[0]=l,n[1]=v,n[2]=m,n[3]=0,n[4]=h*m-s*v,n[5]=s*l-M*m,n[6]=M*v-h*l,n[7]=0,n[8]=M,n[9]=h,n[10]=s,n[11]=0,n[12]=u,n[13]=e,n[14]=o,n[15]=1,n}function k(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"}function G(n){return Math.hypot(n[0],n[1],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])}function U(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n[3]=t[3]+r[3],n[4]=t[4]+r[4],n[5]=t[5]+r[5],n[6]=t[6]+r[6],n[7]=t[7]+r[7],n[8]=t[8]+r[8],n[9]=t[9]+r[9],n[10]=t[10]+r[10],n[11]=t[11]+r[11],n[12]=t[12]+r[12],n[13]=t[13]+r[13],n[14]=t[14]+r[14],n[15]=t[15]+r[15],n}function B(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n[3]=t[3]-r[3],n[4]=t[4]-r[4],n[5]=t[5]-r[5],n[6]=t[6]-r[6],n[7]=t[7]-r[7],n[8]=t[8]-r[8],n[9]=t[9]-r[9],n[10]=t[10]-r[10],n[11]=t[11]-r[11],n[12]=t[12]-r[12],n[13]=t[13]-r[13],n[14]=t[14]-r[14],n[15]=t[15]-r[15],n}function J(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n[4]=t[4]*r,n[5]=t[5]*r,n[6]=t[6]*r,n[7]=t[7]*r,n[8]=t[8]*r,n[9]=t[9]*r,n[10]=t[10]*r,n[11]=t[11]*r,n[12]=t[12]*r,n[13]=t[13]*r,n[14]=t[14]*r,n[15]=t[15]*r,n}function K(n,t,r,a){return n[0]=t[0]+r[0]*a,n[1]=t[1]+r[1]*a,n[2]=t[2]+r[2]*a,n[3]=t[3]+r[3]*a,n[4]=t[4]+r[4]*a,n[5]=t[5]+r[5]*a,n[6]=t[6]+r[6]*a,n[7]=t[7]+r[7]*a,n[8]=t[8]+r[8]*a,n[9]=t[9]+r[9]*a,n[10]=t[10]+r[10]*a,n[11]=t[11]+r[11]*a,n[12]=t[12]+r[12]*a,n[13]=t[13]+r[13]*a,n[14]=t[14]+r[14]*a,n[15]=t[15]+r[15]*a,n}function N(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]&&n[9]===t[9]&&n[10]===t[10]&&n[11]===t[11]&&n[12]===t[12]&&n[13]===t[13]&&n[14]===t[14]&&n[15]===t[15]}function $(n,t){var r=n[0],a=n[1],u=n[2],e=n[3],i=n[4],c=n[5],f=n[6],M=n[7],h=n[8],s=n[9],d=n[10],l=n[11],v=n[12],m=n[13],b=n[14],p=n[15],P=t[0],C=t[1],O=t[2],R=t[3],_=t[4],g=t[5],y=t[6],x=t[7],A=t[8],T=t[9],I=t[10],E=t[11],w=t[12],L=t[13],q=t[14],j=t[15];return Math.abs(r-P)<=o*Math.max(1,Math.abs(r),Math.abs(P))&&Math.abs(a-C)<=o*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(u-O)<=o*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(e-R)<=o*Math.max(1,Math.abs(e),Math.abs(R))&&Math.abs(i-_)<=o*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(c-g)<=o*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-y)<=o*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(M-x)<=o*Math.max(1,Math.abs(M),Math.abs(x))&&Math.abs(h-A)<=o*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(s-T)<=o*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(d-I)<=o*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(l-E)<=o*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(v-w)<=o*Math.max(1,Math.abs(v),Math.abs(w))&&Math.abs(m-L)<=o*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(b-q)<=o*Math.max(1,Math.abs(b),Math.abs(q))&&Math.abs(p-j)<=o*Math.max(1,Math.abs(p),Math.abs(j))}Math.hypot||(Math.hypot=function(){for(var n=0,t=arguments.length;t--;)n+=arguments[t]*arguments[t];return Math.sqrt(n)});var nn=P,tn=B;function rn(){var n=new i(3);return i!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function an(n){var t=new i(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function un(n){var t=n[0],r=n[1],a=n[2];return Math.hypot(t,r,a)}function en(n,t,r){var a=new i(3);return a[0]=n,a[1]=t,a[2]=r,a}function on(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function cn(n,t,r,a){return n[0]=t,n[1]=r,n[2]=a,n}function fn(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n}function Mn(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n}function hn(n,t,r){return n[0]=t[0]*r[0],n[1]=t[1]*r[1],n[2]=t[2]*r[2],n}function sn(n,t,r){return n[0]=t[0]/r[0],n[1]=t[1]/r[1],n[2]=t[2]/r[2],n}function dn(n,t){return n[0]=Math.ceil(t[0]),n[1]=Math.ceil(t[1]),n[2]=Math.ceil(t[2]),n}function ln(n,t){return n[0]=Math.floor(t[0]),n[1]=Math.floor(t[1]),n[2]=Math.floor(t[2]),n}function vn(n,t,r){return n[0]=Math.min(t[0],r[0]),n[1]=Math.min(t[1],r[1]),n[2]=Math.min(t[2],r[2]),n}function mn(n,t,r){return n[0]=Math.max(t[0],r[0]),n[1]=Math.max(t[1],r[1]),n[2]=Math.max(t[2],r[2]),n}function bn(n,t){return n[0]=Math.round(t[0]),n[1]=Math.round(t[1]),n[2]=Math.round(t[2]),n}function pn(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n}function Pn(n,t,r,a){return n[0]=t[0]+r[0]*a,n[1]=t[1]+r[1]*a,n[2]=t[2]+r[2]*a,n}function Cn(n,t){var r=t[0]-n[0],a=t[1]-n[1],u=t[2]-n[2];return Math.hypot(r,a,u)}function On(n,t){var r=t[0]-n[0],a=t[1]-n[1],u=t[2]-n[2];return r*r+a*a+u*u}function Rn(n){var t=n[0],r=n[1],a=n[2];return t*t+r*r+a*a}function _n(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n}function gn(n,t){return n[0]=1/t[0],n[1]=1/t[1],n[2]=1/t[2],n}function yn(n,t){var r=t[0],a=t[1],u=t[2],e=r*r+a*a+u*u;return e>0&&(e=1/Math.sqrt(e)),n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n}function xn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function An(n,t,r){var a=t[0],u=t[1],e=t[2],o=r[0],i=r[1],c=r[2];return n[0]=u*c-e*i,n[1]=e*o-a*c,n[2]=a*i-u*o,n}function Tn(n,t,r,a){var u=t[0],e=t[1],o=t[2];return n[0]=u+a*(r[0]-u),n[1]=e+a*(r[1]-e),n[2]=o+a*(r[2]-o),n}function In(n,t,r,a,u,e){var o=e*e,i=o*(2*e-3)+1,c=o*(e-2)+e,f=o*(e-1),M=o*(3-2*e);return n[0]=t[0]*i+r[0]*c+a[0]*f+u[0]*M,n[1]=t[1]*i+r[1]*c+a[1]*f+u[1]*M,n[2]=t[2]*i+r[2]*c+a[2]*f+u[2]*M,n}function En(n,t,r,a,u,e){var o=1-e,i=o*o,c=e*e,f=i*o,M=3*e*i,h=3*c*o,s=c*e;return n[0]=t[0]*f+r[0]*M+a[0]*h+u[0]*s,n[1]=t[1]*f+r[1]*M+a[1]*h+u[1]*s,n[2]=t[2]*f+r[2]*M+a[2]*h+u[2]*s,n}function wn(n,t){t=t||1;var r=2*c()*Math.PI,a=2*c()-1,u=Math.sqrt(1-a*a)*t;return n[0]=Math.cos(r)*u,n[1]=Math.sin(r)*u,n[2]=a*t,n}function Ln(n,t,r){var a=t[0],u=t[1],e=t[2],o=r[3]*a+r[7]*u+r[11]*e+r[15];return o=o||1,n[0]=(r[0]*a+r[4]*u+r[8]*e+r[12])/o,n[1]=(r[1]*a+r[5]*u+r[9]*e+r[13])/o,n[2]=(r[2]*a+r[6]*u+r[10]*e+r[14])/o,n}function qn(n,t,r){var a=t[0],u=t[1],e=t[2];return n[0]=a*r[0]+u*r[3]+e*r[6],n[1]=a*r[1]+u*r[4]+e*r[7],n[2]=a*r[2]+u*r[5]+e*r[8],n}function jn(n,t,r){var a=r[0],u=r[1],e=r[2],o=r[3],i=t[0],c=t[1],f=t[2],M=u*f-e*c,h=e*i-a*f,s=a*c-u*i,d=u*s-e*h,l=e*M-a*s,v=a*h-u*M,m=2*o;return M*=m,h*=m,s*=m,d*=2,l*=2,v*=2,n[0]=i+M+d,n[1]=c+h+l,n[2]=f+s+v,n}function Sn(n,t,r,a){var u=[],e=[];return u[0]=t[0]-r[0],u[1]=t[1]-r[1],u[2]=t[2]-r[2],e[0]=u[0],e[1]=u[1]*Math.cos(a)-u[2]*Math.sin(a),e[2]=u[1]*Math.sin(a)+u[2]*Math.cos(a),n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n}function Dn(n,t,r,a){var u=[],e=[];return u[0]=t[0]-r[0],u[1]=t[1]-r[1],u[2]=t[2]-r[2],e[0]=u[2]*Math.sin(a)+u[0]*Math.cos(a),e[1]=u[1],e[2]=u[2]*Math.cos(a)-u[0]*Math.sin(a),n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n}function Fn(n,t,r,a){var u=[],e=[];return u[0]=t[0]-r[0],u[1]=t[1]-r[1],u[2]=t[2]-r[2],e[0]=u[0]*Math.cos(a)-u[1]*Math.sin(a),e[1]=u[0]*Math.sin(a)+u[1]*Math.cos(a),e[2]=u[2],n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n}function Wn(n,t){var r=en(n[0],n[1],n[2]),a=en(t[0],t[1],t[2]);yn(r,r),yn(a,a);var u=xn(r,a);return u>1?0:u<-1?Math.PI:Math.acos(u)}function zn(n){return n[0]=0,n[1]=0,n[2]=0,n}function Zn(n){return"vec3("+n[0]+", "+n[1]+", "+n[2]+")"}function Vn(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]}function Qn(n,t){var r=n[0],a=n[1],u=n[2],e=t[0],i=t[1],c=t[2];return Math.abs(r-e)<=o*Math.max(1,Math.abs(r),Math.abs(e))&&Math.abs(a-i)<=o*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(u-c)<=o*Math.max(1,Math.abs(u),Math.abs(c))}var Xn,Yn=Mn,Hn=hn,kn=sn,Gn=Cn,Un=On,Bn=un,Jn=Rn,Kn=(Xn=rn(),function(n,t,r,a,u,e){var o,i;for(t||(t=3),r||(r=0),i=a?Math.min(a*t+r,n.length):n.length,o=r;o<i;o+=t)Xn[0]=n[o],Xn[1]=n[o+1],Xn[2]=n[o+2],u(Xn,Xn,e),n[o]=Xn[0],n[o+1]=Xn[1],n[o+2]=Xn[2];return n});function Nn(){var n=new i(4);return i!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function $n(n){var t=new i(4);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function nt(n,t,r,a){var u=new i(4);return u[0]=n,u[1]=t,u[2]=r,u[3]=a,u}function tt(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function rt(n,t,r,a,u){return n[0]=t,n[1]=r,n[2]=a,n[3]=u,n}function at(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n[3]=t[3]+r[3],n}function ut(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n[3]=t[3]-r[3],n}function et(n,t,r){return n[0]=t[0]*r[0],n[1]=t[1]*r[1],n[2]=t[2]*r[2],n[3]=t[3]*r[3],n}function ot(n,t,r){return n[0]=t[0]/r[0],n[1]=t[1]/r[1],n[2]=t[2]/r[2],n[3]=t[3]/r[3],n}function it(n,t){return n[0]=Math.ceil(t[0]),n[1]=Math.ceil(t[1]),n[2]=Math.ceil(t[2]),n[3]=Math.ceil(t[3]),n}function ct(n,t){return n[0]=Math.floor(t[0]),n[1]=Math.floor(t[1]),n[2]=Math.floor(t[2]),n[3]=Math.floor(t[3]),n}function ft(n,t,r){return n[0]=Math.min(t[0],r[0]),n[1]=Math.min(t[1],r[1]),n[2]=Math.min(t[2],r[2]),n[3]=Math.min(t[3],r[3]),n}function Mt(n,t,r){return n[0]=Math.max(t[0],r[0]),n[1]=Math.max(t[1],r[1]),n[2]=Math.max(t[2],r[2]),n[3]=Math.max(t[3],r[3]),n}function ht(n,t){return n[0]=Math.round(t[0]),n[1]=Math.round(t[1]),n[2]=Math.round(t[2]),n[3]=Math.round(t[3]),n}function st(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n}function dt(n,t,r,a){return n[0]=t[0]+r[0]*a,n[1]=t[1]+r[1]*a,n[2]=t[2]+r[2]*a,n[3]=t[3]+r[3]*a,n}function lt(n,t){var r=t[0]-n[0],a=t[1]-n[1],u=t[2]-n[2],e=t[3]-n[3];return Math.hypot(r,a,u,e)}function vt(n,t){var r=t[0]-n[0],a=t[1]-n[1],u=t[2]-n[2],e=t[3]-n[3];return r*r+a*a+u*u+e*e}function mt(n){var t=n[0],r=n[1],a=n[2],u=n[3];return Math.hypot(t,r,a,u)}function bt(n){var t=n[0],r=n[1],a=n[2],u=n[3];return t*t+r*r+a*a+u*u}function pt(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=-t[3],n}function Pt(n,t){return n[0]=1/t[0],n[1]=1/t[1],n[2]=1/t[2],n[3]=1/t[3],n}function Ct(n,t){var r=t[0],a=t[1],u=t[2],e=t[3],o=r*r+a*a+u*u+e*e;return o>0&&(o=1/Math.sqrt(o)),n[0]=r*o,n[1]=a*o,n[2]=u*o,n[3]=e*o,n}function Ot(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Rt(n,t,r,a){var u=r[0]*a[1]-r[1]*a[0],e=r[0]*a[2]-r[2]*a[0],o=r[0]*a[3]-r[3]*a[0],i=r[1]*a[2]-r[2]*a[1],c=r[1]*a[3]-r[3]*a[1],f=r[2]*a[3]-r[3]*a[2],M=t[0],h=t[1],s=t[2],d=t[3];return n[0]=h*f-s*c+d*i,n[1]=-M*f+s*o-d*e,n[2]=M*c-h*o+d*u,n[3]=-M*i+h*e-s*u,n}function _t(n,t,r,a){var u=t[0],e=t[1],o=t[2],i=t[3];return n[0]=u+a*(r[0]-u),n[1]=e+a*(r[1]-e),n[2]=o+a*(r[2]-o),n[3]=i+a*(r[3]-i),n}function gt(n,t){var r,a,u,e,o,i;t=t||1;do{o=(r=2*c()-1)*r+(a=2*c()-1)*a}while(o>=1);do{i=(u=2*c()-1)*u+(e=2*c()-1)*e}while(i>=1);var f=Math.sqrt((1-o)/i);return n[0]=t*r,n[1]=t*a,n[2]=t*u*f,n[3]=t*e*f,n}function yt(n,t,r){var a=t[0],u=t[1],e=t[2],o=t[3];return n[0]=r[0]*a+r[4]*u+r[8]*e+r[12]*o,n[1]=r[1]*a+r[5]*u+r[9]*e+r[13]*o,n[2]=r[2]*a+r[6]*u+r[10]*e+r[14]*o,n[3]=r[3]*a+r[7]*u+r[11]*e+r[15]*o,n}function xt(n,t,r){var a=t[0],u=t[1],e=t[2],o=r[0],i=r[1],c=r[2],f=r[3],M=f*a+i*e-c*u,h=f*u+c*a-o*e,s=f*e+o*u-i*a,d=-o*a-i*u-c*e;return n[0]=M*f+d*-o+h*-c-s*-i,n[1]=h*f+d*-i+s*-o-M*-c,n[2]=s*f+d*-c+M*-i-h*-o,n[3]=t[3],n}function At(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n}function Tt(n){return"vec4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}function It(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]}function Et(n,t){var r=n[0],a=n[1],u=n[2],e=n[3],i=t[0],c=t[1],f=t[2],M=t[3];return Math.abs(r-i)<=o*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-c)<=o*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(u-f)<=o*Math.max(1,Math.abs(u),Math.abs(f))&&Math.abs(e-M)<=o*Math.max(1,Math.abs(e),Math.abs(M))}var wt=ut,Lt=et,qt=ot,jt=lt,St=vt,Dt=mt,Ft=bt,Wt=function(){var n=Nn();return function(t,r,a,u,e,o){var i,c;for(r||(r=4),a||(a=0),c=u?Math.min(u*r+a,t.length):t.length,i=a;i<c;i+=r)n[0]=t[i],n[1]=t[i+1],n[2]=t[i+2],n[3]=t[i+3],e(n,n,o),t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2],t[i+3]=n[3];return t}}();r.d(t,"PicoMercator",(function(){return Bt}));const zt=Math.PI,Zt=zt/4,Vt=zt/180;let Qt=new Float64Array(4),Xt=new Float64Array(3),Yt=new Float64Array(3),Ht=new Float32Array(2),kt=new Float32Array(2),Gt=new Float32Array(4),Ut=new Float32Array(16);const Bt={highPrecisionMat4:()=>a.identity(new Float64Array(16)),injectGLSLProjection(n){let t=n.match(/#version \d+(\s+es)?\s*\n/),r=t?t[0]:"";return n.replace(r,r+"\nconst float PICO_MERCATOR_TILE_SIZE = 512.0;\nconst float PICO_MERCATOR_PI = 3.1415926536;\nconst float PICO_MERCATOR_WORLD_SCALE = PICO_MERCATOR_TILE_SIZE / (PICO_MERCATOR_PI * 2.0);\n\nuniform vec2 PICO_MERCATOR_lngLatCenter;\nuniform vec2 PICO_MERCATOR_pixelsPerDegree;\nuniform float PICO_MERCATOR_scale;\nuniform vec4 PICO_MERCATOR_clipCenter;\nuniform mat4 PICO_MERCATOR_viewProjectionMatrix;\n\nvec4 PICO_MERCATOR_lngLatToWorld(vec2 lngLatPosition) {\n    vec2 mercatorPosition;\n    if (PICO_MERCATOR_scale < 2048.0) {\n        mercatorPosition = vec2(\n            (radians(lngLatPosition.x) + PICO_MERCATOR_PI) * PICO_MERCATOR_WORLD_SCALE,\n            (PICO_MERCATOR_PI + log(tan(PICO_MERCATOR_PI * 0.25 + radians(lngLatPosition.y) * 0.5))) * PICO_MERCATOR_WORLD_SCALE\n        );\n    } else {\n        mercatorPosition = (lngLatPosition - PICO_MERCATOR_lngLatCenter) * PICO_MERCATOR_pixelsPerDegree;\n    }\n\n    return vec4(mercatorPosition, 0.0, 1.0);\n}\n\nvec4 PICO_MERCATOR_worldToClip(vec4 worldPosition) {\n    if (PICO_MERCATOR_scale >= 2048.0) {\n        worldPosition.w = 0.0;\n    }\n    vec4 clipPosition = PICO_MERCATOR_viewProjectionMatrix * worldPosition;\n    if (PICO_MERCATOR_scale >= 2048.0) {\n        clipPosition += PICO_MERCATOR_clipCenter;\n    }\n\n    return clipPosition;\n}\n\nvec4 PICO_MERCATOR_lngLatToClip(vec2 lngLatPosition) {\n    return PICO_MERCATOR_worldToClip(PICO_MERCATOR_lngLatToWorld(lngLatPosition));\n}\n")},mapboxViewMatrix(n,{longitude:t,latitude:r,zoom:e,pitch:o,bearing:i,canvasHeight:c}){let f=Math.pow(2,e);return a.identity(n),Xt[2]=-1.5*c,a.translate(n,n,Xt),a.rotateX(n,n,-o*Vt),a.rotateZ(n,n,i*Vt),this.lngLatToWorld(Qt,t,r),Yt[0]=f,Yt[1]=f,Yt[2]=1,a.scale(n,n,Yt),a.translate(n,n,u.negate(Qt,Qt)),n},mapboxProjectionMatrix(n,{pitch:t=0,canvasWidth:r,canvasHeight:u,near:e=u}){let o=1.5*u,i=t*Vt,c=Math.atan(1/3),f=Math.sin(c)*o/Math.sin(Math.PI/2-i-c),M=2*c,h=r/u,s=1.01*(Math.cos(Math.PI/2-i)*f+o);return a.perspective(n,M,h,e,s),n},forEachUniform(n,t,r,u,e,o){Ht[0]=n,Ht[1]=t,o("PICO_MERCATOR_lngLatCenter",Ht),this.pixelsPerDegree(kt,t),o("PICO_MERCATOR_pixelsPerDegree",kt),this.lngLatToClip(Gt,n,t,u,e),o("PICO_MERCATOR_clipCenter",Gt),o("PICO_MERCATOR_scale",Math.pow(2,r)),a.multiply(Ut,e,u),o("PICO_MERCATOR_viewProjectionMatrix",Ut)},pixelsPerMeter:n=>512/4003e4/Math.cos(n*Vt),pixelsPerDegree:(n,t)=>(n[0]=512/360,n[1]=n[0]/Math.cos(t*Vt),n),lngLatToWorld(n,t,r){let a=r*Vt,u=512*(t*Vt+zt)/(2*zt),e=512*(zt+Math.log(Math.tan(Zt+.5*a)))/(2*zt);return n[0]=u,n[1]=e,n[2]=0,n[3]=1,n},worldToClip:(n,t,r,a)=>(e.transformMat4(Qt,t,r),e.transformMat4(n,Qt,a),n),lngLatToClip(n,t,r,a,u){return this.lngLatToWorld(Qt,t,r),this.worldToClip(n,Qt,a,u),n}}}}).PicoMercator}));
//# sourceMappingURL=pico-mercator.min.js.map