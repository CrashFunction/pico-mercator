/*! 
The MIT License (MIT)

Copyright (c) 2019 Tarek Sherif

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the "Software"), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

 */
!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PicoMercator=t():n.PicoMercator=t()}(window,(function(){return function(n){var t={};function r(o){if(t[o])return t[o].exports;var e=t[o]={i:o,l:!1,exports:{}};return n[o].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=n,r.c=t,r.d=function(n,t,o){r.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:o})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,t){if(1&t&&(n=r(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var e in n)r.d(o,e,function(t){return n[t]}.bind(null,e));return o},r.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(t,"a",t),t},r.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},r.p="",r(r.s=6)}({6:function(n,t,r){"use strict";r.r(t);var o={};r.r(o),r.d(o,"create",(function(){return f})),r.d(o,"clone",(function(){return s})),r.d(o,"copy",(function(){return h})),r.d(o,"fromValues",(function(){return M})),r.d(o,"set",(function(){return d})),r.d(o,"identity",(function(){return l})),r.d(o,"transpose",(function(){return m})),r.d(o,"invert",(function(){return p})),r.d(o,"adjoint",(function(){return v})),r.d(o,"determinant",(function(){return _})),r.d(o,"multiply",(function(){return b})),r.d(o,"translate",(function(){return P})),r.d(o,"scale",(function(){return x})),r.d(o,"rotate",(function(){return y})),r.d(o,"rotateX",(function(){return g})),r.d(o,"rotateY",(function(){return w})),r.d(o,"rotateZ",(function(){return C})),r.d(o,"fromTranslation",(function(){return A})),r.d(o,"fromScaling",(function(){return O})),r.d(o,"fromRotation",(function(){return R})),r.d(o,"fromXRotation",(function(){return L})),r.d(o,"fromYRotation",(function(){return I})),r.d(o,"fromZRotation",(function(){return T})),r.d(o,"fromRotationTranslation",(function(){return q})),r.d(o,"fromQuat2",(function(){return E})),r.d(o,"getTranslation",(function(){return j})),r.d(o,"getScaling",(function(){return S})),r.d(o,"getRotation",(function(){return D})),r.d(o,"fromRotationTranslationScale",(function(){return F})),r.d(o,"fromRotationTranslationScaleOrigin",(function(){return W})),r.d(o,"fromQuat",(function(){return Z})),r.d(o,"frustum",(function(){return z})),r.d(o,"perspective",(function(){return V})),r.d(o,"perspectiveFromFieldOfView",(function(){return Q})),r.d(o,"ortho",(function(){return X})),r.d(o,"lookAt",(function(){return Y})),r.d(o,"targetTo",(function(){return k})),r.d(o,"str",(function(){return G})),r.d(o,"frob",(function(){return B})),r.d(o,"add",(function(){return H})),r.d(o,"subtract",(function(){return J})),r.d(o,"multiplyScalar",(function(){return K})),r.d(o,"multiplyScalarAndAdd",(function(){return N})),r.d(o,"exactEquals",(function(){return U})),r.d(o,"equals",(function(){return $})),r.d(o,"mul",(function(){return nn})),r.d(o,"sub",(function(){return tn}));var e={};r.r(e),r.d(e,"create",(function(){return rn})),r.d(e,"clone",(function(){return on})),r.d(e,"length",(function(){return en})),r.d(e,"fromValues",(function(){return un})),r.d(e,"copy",(function(){return an})),r.d(e,"set",(function(){return cn})),r.d(e,"add",(function(){return fn})),r.d(e,"subtract",(function(){return sn})),r.d(e,"multiply",(function(){return hn})),r.d(e,"divide",(function(){return Mn})),r.d(e,"ceil",(function(){return dn})),r.d(e,"floor",(function(){return ln})),r.d(e,"min",(function(){return mn})),r.d(e,"max",(function(){return pn})),r.d(e,"round",(function(){return vn})),r.d(e,"scale",(function(){return _n})),r.d(e,"scaleAndAdd",(function(){return bn})),r.d(e,"distance",(function(){return Pn})),r.d(e,"squaredDistance",(function(){return xn})),r.d(e,"squaredLength",(function(){return yn})),r.d(e,"negate",(function(){return gn})),r.d(e,"inverse",(function(){return wn})),r.d(e,"normalize",(function(){return Cn})),r.d(e,"dot",(function(){return An})),r.d(e,"cross",(function(){return On})),r.d(e,"lerp",(function(){return Rn})),r.d(e,"hermite",(function(){return Ln})),r.d(e,"bezier",(function(){return In})),r.d(e,"random",(function(){return Tn})),r.d(e,"transformMat4",(function(){return qn})),r.d(e,"transformMat3",(function(){return En})),r.d(e,"transformQuat",(function(){return jn})),r.d(e,"rotateX",(function(){return Sn})),r.d(e,"rotateY",(function(){return Dn})),r.d(e,"rotateZ",(function(){return Fn})),r.d(e,"angle",(function(){return Wn})),r.d(e,"zero",(function(){return Zn})),r.d(e,"str",(function(){return zn})),r.d(e,"exactEquals",(function(){return Vn})),r.d(e,"equals",(function(){return Qn})),r.d(e,"sub",(function(){return Yn})),r.d(e,"mul",(function(){return kn})),r.d(e,"div",(function(){return Gn})),r.d(e,"dist",(function(){return Bn})),r.d(e,"sqrDist",(function(){return Hn})),r.d(e,"len",(function(){return Jn})),r.d(e,"sqrLen",(function(){return Kn})),r.d(e,"forEach",(function(){return Nn}));var u={};r.r(u),r.d(u,"create",(function(){return Un})),r.d(u,"clone",(function(){return $n})),r.d(u,"fromValues",(function(){return nt})),r.d(u,"copy",(function(){return tt})),r.d(u,"set",(function(){return rt})),r.d(u,"add",(function(){return ot})),r.d(u,"subtract",(function(){return et})),r.d(u,"multiply",(function(){return ut})),r.d(u,"divide",(function(){return at})),r.d(u,"ceil",(function(){return it})),r.d(u,"floor",(function(){return ct})),r.d(u,"min",(function(){return ft})),r.d(u,"max",(function(){return st})),r.d(u,"round",(function(){return ht})),r.d(u,"scale",(function(){return Mt})),r.d(u,"scaleAndAdd",(function(){return dt})),r.d(u,"distance",(function(){return lt})),r.d(u,"squaredDistance",(function(){return mt})),r.d(u,"length",(function(){return pt})),r.d(u,"squaredLength",(function(){return vt})),r.d(u,"negate",(function(){return _t})),r.d(u,"inverse",(function(){return bt})),r.d(u,"normalize",(function(){return Pt})),r.d(u,"dot",(function(){return xt})),r.d(u,"cross",(function(){return yt})),r.d(u,"lerp",(function(){return gt})),r.d(u,"random",(function(){return wt})),r.d(u,"transformMat4",(function(){return Ct})),r.d(u,"transformQuat",(function(){return At})),r.d(u,"zero",(function(){return Ot})),r.d(u,"str",(function(){return Rt})),r.d(u,"exactEquals",(function(){return Lt})),r.d(u,"equals",(function(){return It})),r.d(u,"sub",(function(){return Tt})),r.d(u,"mul",(function(){return qt})),r.d(u,"div",(function(){return Et})),r.d(u,"dist",(function(){return jt})),r.d(u,"sqrDist",(function(){return St})),r.d(u,"len",(function(){return Dt})),r.d(u,"sqrLen",(function(){return Ft})),r.d(u,"forEach",(function(){return Wt}));var a=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,c=Math.random;Math.PI;function f(){var n=new i(16);return i!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function s(n){var t=new i(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function h(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function M(n,t,r,o,e,u,a,c,f,s,h,M,d,l,m,p){var v=new i(16);return v[0]=n,v[1]=t,v[2]=r,v[3]=o,v[4]=e,v[5]=u,v[6]=a,v[7]=c,v[8]=f,v[9]=s,v[10]=h,v[11]=M,v[12]=d,v[13]=l,v[14]=m,v[15]=p,v}function d(n,t,r,o,e,u,a,i,c,f,s,h,M,d,l,m,p){return n[0]=t,n[1]=r,n[2]=o,n[3]=e,n[4]=u,n[5]=a,n[6]=i,n[7]=c,n[8]=f,n[9]=s,n[10]=h,n[11]=M,n[12]=d,n[13]=l,n[14]=m,n[15]=p,n}function l(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function m(n,t){if(n===t){var r=t[1],o=t[2],e=t[3],u=t[6],a=t[7],i=t[11];n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=r,n[6]=t[9],n[7]=t[13],n[8]=o,n[9]=u,n[11]=t[14],n[12]=e,n[13]=a,n[14]=i}else n[0]=t[0],n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=t[1],n[5]=t[5],n[6]=t[9],n[7]=t[13],n[8]=t[2],n[9]=t[6],n[10]=t[10],n[11]=t[14],n[12]=t[3],n[13]=t[7],n[14]=t[11],n[15]=t[15];return n}function p(n,t){var r=t[0],o=t[1],e=t[2],u=t[3],a=t[4],i=t[5],c=t[6],f=t[7],s=t[8],h=t[9],M=t[10],d=t[11],l=t[12],m=t[13],p=t[14],v=t[15],_=r*i-o*a,b=r*c-e*a,P=r*f-u*a,x=o*c-e*i,y=o*f-u*i,g=e*f-u*c,w=s*m-h*l,C=s*p-M*l,A=s*v-d*l,O=h*p-M*m,R=h*v-d*m,L=M*v-d*p,I=_*L-b*R+P*O+x*A-y*C+g*w;return I?(I=1/I,n[0]=(i*L-c*R+f*O)*I,n[1]=(e*R-o*L-u*O)*I,n[2]=(m*g-p*y+v*x)*I,n[3]=(M*y-h*g-d*x)*I,n[4]=(c*A-a*L-f*C)*I,n[5]=(r*L-e*A+u*C)*I,n[6]=(p*P-l*g-v*b)*I,n[7]=(s*g-M*P+d*b)*I,n[8]=(a*R-i*A+f*w)*I,n[9]=(o*A-r*R-u*w)*I,n[10]=(l*y-m*P+v*_)*I,n[11]=(h*P-s*y-d*_)*I,n[12]=(i*C-a*O-c*w)*I,n[13]=(r*O-o*C+e*w)*I,n[14]=(m*b-l*x-p*_)*I,n[15]=(s*x-h*b+M*_)*I,n):null}function v(n,t){var r=t[0],o=t[1],e=t[2],u=t[3],a=t[4],i=t[5],c=t[6],f=t[7],s=t[8],h=t[9],M=t[10],d=t[11],l=t[12],m=t[13],p=t[14],v=t[15];return n[0]=i*(M*v-d*p)-h*(c*v-f*p)+m*(c*d-f*M),n[1]=-(o*(M*v-d*p)-h*(e*v-u*p)+m*(e*d-u*M)),n[2]=o*(c*v-f*p)-i*(e*v-u*p)+m*(e*f-u*c),n[3]=-(o*(c*d-f*M)-i*(e*d-u*M)+h*(e*f-u*c)),n[4]=-(a*(M*v-d*p)-s*(c*v-f*p)+l*(c*d-f*M)),n[5]=r*(M*v-d*p)-s*(e*v-u*p)+l*(e*d-u*M),n[6]=-(r*(c*v-f*p)-a*(e*v-u*p)+l*(e*f-u*c)),n[7]=r*(c*d-f*M)-a*(e*d-u*M)+s*(e*f-u*c),n[8]=a*(h*v-d*m)-s*(i*v-f*m)+l*(i*d-f*h),n[9]=-(r*(h*v-d*m)-s*(o*v-u*m)+l*(o*d-u*h)),n[10]=r*(i*v-f*m)-a*(o*v-u*m)+l*(o*f-u*i),n[11]=-(r*(i*d-f*h)-a*(o*d-u*h)+s*(o*f-u*i)),n[12]=-(a*(h*p-M*m)-s*(i*p-c*m)+l*(i*M-c*h)),n[13]=r*(h*p-M*m)-s*(o*p-e*m)+l*(o*M-e*h),n[14]=-(r*(i*p-c*m)-a*(o*p-e*m)+l*(o*c-e*i)),n[15]=r*(i*M-c*h)-a*(o*M-e*h)+s*(o*c-e*i),n}function _(n){var t=n[0],r=n[1],o=n[2],e=n[3],u=n[4],a=n[5],i=n[6],c=n[7],f=n[8],s=n[9],h=n[10],M=n[11],d=n[12],l=n[13],m=n[14],p=n[15];return(t*a-r*u)*(h*p-M*m)-(t*i-o*u)*(s*p-M*l)+(t*c-e*u)*(s*m-h*l)+(r*i-o*a)*(f*p-M*d)-(r*c-e*a)*(f*m-h*d)+(o*c-e*i)*(f*l-s*d)}function b(n,t,r){var o=t[0],e=t[1],u=t[2],a=t[3],i=t[4],c=t[5],f=t[6],s=t[7],h=t[8],M=t[9],d=t[10],l=t[11],m=t[12],p=t[13],v=t[14],_=t[15],b=r[0],P=r[1],x=r[2],y=r[3];return n[0]=b*o+P*i+x*h+y*m,n[1]=b*e+P*c+x*M+y*p,n[2]=b*u+P*f+x*d+y*v,n[3]=b*a+P*s+x*l+y*_,b=r[4],P=r[5],x=r[6],y=r[7],n[4]=b*o+P*i+x*h+y*m,n[5]=b*e+P*c+x*M+y*p,n[6]=b*u+P*f+x*d+y*v,n[7]=b*a+P*s+x*l+y*_,b=r[8],P=r[9],x=r[10],y=r[11],n[8]=b*o+P*i+x*h+y*m,n[9]=b*e+P*c+x*M+y*p,n[10]=b*u+P*f+x*d+y*v,n[11]=b*a+P*s+x*l+y*_,b=r[12],P=r[13],x=r[14],y=r[15],n[12]=b*o+P*i+x*h+y*m,n[13]=b*e+P*c+x*M+y*p,n[14]=b*u+P*f+x*d+y*v,n[15]=b*a+P*s+x*l+y*_,n}function P(n,t,r){var o,e,u,a,i,c,f,s,h,M,d,l,m=r[0],p=r[1],v=r[2];return t===n?(n[12]=t[0]*m+t[4]*p+t[8]*v+t[12],n[13]=t[1]*m+t[5]*p+t[9]*v+t[13],n[14]=t[2]*m+t[6]*p+t[10]*v+t[14],n[15]=t[3]*m+t[7]*p+t[11]*v+t[15]):(o=t[0],e=t[1],u=t[2],a=t[3],i=t[4],c=t[5],f=t[6],s=t[7],h=t[8],M=t[9],d=t[10],l=t[11],n[0]=o,n[1]=e,n[2]=u,n[3]=a,n[4]=i,n[5]=c,n[6]=f,n[7]=s,n[8]=h,n[9]=M,n[10]=d,n[11]=l,n[12]=o*m+i*p+h*v+t[12],n[13]=e*m+c*p+M*v+t[13],n[14]=u*m+f*p+d*v+t[14],n[15]=a*m+s*p+l*v+t[15]),n}function x(n,t,r){var o=r[0],e=r[1],u=r[2];return n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*o,n[3]=t[3]*o,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*u,n[9]=t[9]*u,n[10]=t[10]*u,n[11]=t[11]*u,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function y(n,t,r,o){var e,u,i,c,f,s,h,M,d,l,m,p,v,_,b,P,x,y,g,w,C,A,O,R,L=o[0],I=o[1],T=o[2],q=Math.hypot(L,I,T);return q<a?null:(L*=q=1/q,I*=q,T*=q,e=Math.sin(r),i=1-(u=Math.cos(r)),c=t[0],f=t[1],s=t[2],h=t[3],M=t[4],d=t[5],l=t[6],m=t[7],p=t[8],v=t[9],_=t[10],b=t[11],P=L*L*i+u,x=I*L*i+T*e,y=T*L*i-I*e,g=L*I*i-T*e,w=I*I*i+u,C=T*I*i+L*e,A=L*T*i+I*e,O=I*T*i-L*e,R=T*T*i+u,n[0]=c*P+M*x+p*y,n[1]=f*P+d*x+v*y,n[2]=s*P+l*x+_*y,n[3]=h*P+m*x+b*y,n[4]=c*g+M*w+p*C,n[5]=f*g+d*w+v*C,n[6]=s*g+l*w+_*C,n[7]=h*g+m*w+b*C,n[8]=c*A+M*O+p*R,n[9]=f*A+d*O+v*R,n[10]=s*A+l*O+_*R,n[11]=h*A+m*O+b*R,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n)}function g(n,t,r){var o=Math.sin(r),e=Math.cos(r),u=t[4],a=t[5],i=t[6],c=t[7],f=t[8],s=t[9],h=t[10],M=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=u*e+f*o,n[5]=a*e+s*o,n[6]=i*e+h*o,n[7]=c*e+M*o,n[8]=f*e-u*o,n[9]=s*e-a*o,n[10]=h*e-i*o,n[11]=M*e-c*o,n}function w(n,t,r){var o=Math.sin(r),e=Math.cos(r),u=t[0],a=t[1],i=t[2],c=t[3],f=t[8],s=t[9],h=t[10],M=t[11];return t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=u*e-f*o,n[1]=a*e-s*o,n[2]=i*e-h*o,n[3]=c*e-M*o,n[8]=u*o+f*e,n[9]=a*o+s*e,n[10]=i*o+h*e,n[11]=c*o+M*e,n}function C(n,t,r){var o=Math.sin(r),e=Math.cos(r),u=t[0],a=t[1],i=t[2],c=t[3],f=t[4],s=t[5],h=t[6],M=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=u*e+f*o,n[1]=a*e+s*o,n[2]=i*e+h*o,n[3]=c*e+M*o,n[4]=f*e-u*o,n[5]=s*e-a*o,n[6]=h*e-i*o,n[7]=M*e-c*o,n}function A(n,t){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n}function O(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=t[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=t[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function R(n,t,r){var o,e,u,i=r[0],c=r[1],f=r[2],s=Math.hypot(i,c,f);return s<a?null:(i*=s=1/s,c*=s,f*=s,o=Math.sin(t),u=1-(e=Math.cos(t)),n[0]=i*i*u+e,n[1]=c*i*u+f*o,n[2]=f*i*u-c*o,n[3]=0,n[4]=i*c*u-f*o,n[5]=c*c*u+e,n[6]=f*c*u+i*o,n[7]=0,n[8]=i*f*u+c*o,n[9]=c*f*u-i*o,n[10]=f*f*u+e,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}function L(n,t){var r=Math.sin(t),o=Math.cos(t);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o,n[6]=r,n[7]=0,n[8]=0,n[9]=-r,n[10]=o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function I(n,t){var r=Math.sin(t),o=Math.cos(t);return n[0]=o,n[1]=0,n[2]=-r,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=r,n[9]=0,n[10]=o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function T(n,t){var r=Math.sin(t),o=Math.cos(t);return n[0]=o,n[1]=r,n[2]=0,n[3]=0,n[4]=-r,n[5]=o,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function q(n,t,r){var o=t[0],e=t[1],u=t[2],a=t[3],i=o+o,c=e+e,f=u+u,s=o*i,h=o*c,M=o*f,d=e*c,l=e*f,m=u*f,p=a*i,v=a*c,_=a*f;return n[0]=1-(d+m),n[1]=h+_,n[2]=M-v,n[3]=0,n[4]=h-_,n[5]=1-(s+m),n[6]=l+p,n[7]=0,n[8]=M+v,n[9]=l-p,n[10]=1-(s+d),n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function E(n,t){var r=new i(3),o=-t[0],e=-t[1],u=-t[2],a=t[3],c=t[4],f=t[5],s=t[6],h=t[7],M=o*o+e*e+u*u+a*a;return M>0?(r[0]=2*(c*a+h*o+f*u-s*e)/M,r[1]=2*(f*a+h*e+s*o-c*u)/M,r[2]=2*(s*a+h*u+c*e-f*o)/M):(r[0]=2*(c*a+h*o+f*u-s*e),r[1]=2*(f*a+h*e+s*o-c*u),r[2]=2*(s*a+h*u+c*e-f*o)),q(n,t,r),n}function j(n,t){return n[0]=t[12],n[1]=t[13],n[2]=t[14],n}function S(n,t){var r=t[0],o=t[1],e=t[2],u=t[4],a=t[5],i=t[6],c=t[8],f=t[9],s=t[10];return n[0]=Math.hypot(r,o,e),n[1]=Math.hypot(u,a,i),n[2]=Math.hypot(c,f,s),n}function D(n,t){var r=new i(3);S(r,t);var o=1/r[0],e=1/r[1],u=1/r[2],a=t[0]*o,c=t[1]*e,f=t[2]*u,s=t[4]*o,h=t[5]*e,M=t[6]*u,d=t[8]*o,l=t[9]*e,m=t[10]*u,p=a+h+m,v=0;return p>0?(v=2*Math.sqrt(p+1),n[3]=.25*v,n[0]=(M-l)/v,n[1]=(d-f)/v,n[2]=(c-s)/v):a>h&&a>m?(v=2*Math.sqrt(1+a-h-m),n[3]=(M-l)/v,n[0]=.25*v,n[1]=(c+s)/v,n[2]=(d+f)/v):h>m?(v=2*Math.sqrt(1+h-a-m),n[3]=(d-f)/v,n[0]=(c+s)/v,n[1]=.25*v,n[2]=(M+l)/v):(v=2*Math.sqrt(1+m-a-h),n[3]=(c-s)/v,n[0]=(d+f)/v,n[1]=(M+l)/v,n[2]=.25*v),n}function F(n,t,r,o){var e=t[0],u=t[1],a=t[2],i=t[3],c=e+e,f=u+u,s=a+a,h=e*c,M=e*f,d=e*s,l=u*f,m=u*s,p=a*s,v=i*c,_=i*f,b=i*s,P=o[0],x=o[1],y=o[2];return n[0]=(1-(l+p))*P,n[1]=(M+b)*P,n[2]=(d-_)*P,n[3]=0,n[4]=(M-b)*x,n[5]=(1-(h+p))*x,n[6]=(m+v)*x,n[7]=0,n[8]=(d+_)*y,n[9]=(m-v)*y,n[10]=(1-(h+l))*y,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function W(n,t,r,o,e){var u=t[0],a=t[1],i=t[2],c=t[3],f=u+u,s=a+a,h=i+i,M=u*f,d=u*s,l=u*h,m=a*s,p=a*h,v=i*h,_=c*f,b=c*s,P=c*h,x=o[0],y=o[1],g=o[2],w=e[0],C=e[1],A=e[2],O=(1-(m+v))*x,R=(d+P)*x,L=(l-b)*x,I=(d-P)*y,T=(1-(M+v))*y,q=(p+_)*y,E=(l+b)*g,j=(p-_)*g,S=(1-(M+m))*g;return n[0]=O,n[1]=R,n[2]=L,n[3]=0,n[4]=I,n[5]=T,n[6]=q,n[7]=0,n[8]=E,n[9]=j,n[10]=S,n[11]=0,n[12]=r[0]+w-(O*w+I*C+E*A),n[13]=r[1]+C-(R*w+T*C+j*A),n[14]=r[2]+A-(L*w+q*C+S*A),n[15]=1,n}function Z(n,t){var r=t[0],o=t[1],e=t[2],u=t[3],a=r+r,i=o+o,c=e+e,f=r*a,s=o*a,h=o*i,M=e*a,d=e*i,l=e*c,m=u*a,p=u*i,v=u*c;return n[0]=1-h-l,n[1]=s+v,n[2]=M-p,n[3]=0,n[4]=s-v,n[5]=1-f-l,n[6]=d+m,n[7]=0,n[8]=M+p,n[9]=d-m,n[10]=1-f-h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function z(n,t,r,o,e,u,a){var i=1/(r-t),c=1/(e-o),f=1/(u-a);return n[0]=2*u*i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*u*c,n[6]=0,n[7]=0,n[8]=(r+t)*i,n[9]=(e+o)*c,n[10]=(a+u)*f,n[11]=-1,n[12]=0,n[13]=0,n[14]=a*u*2*f,n[15]=0,n}function V(n,t,r,o,e){var u,a=1/Math.tan(t/2);return n[0]=a/r,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=e&&e!==1/0?(u=1/(o-e),n[10]=(e+o)*u,n[14]=2*e*o*u):(n[10]=-1,n[14]=-2*o),n}function Q(n,t,r,o){var e=Math.tan(t.upDegrees*Math.PI/180),u=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),i=Math.tan(t.rightDegrees*Math.PI/180),c=2/(a+i),f=2/(e+u);return n[0]=c,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=f,n[6]=0,n[7]=0,n[8]=-(a-i)*c*.5,n[9]=(e-u)*f*.5,n[10]=o/(r-o),n[11]=-1,n[12]=0,n[13]=0,n[14]=o*r/(r-o),n[15]=0,n}function X(n,t,r,o,e,u,a){var i=1/(t-r),c=1/(o-e),f=1/(u-a);return n[0]=-2*i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*f,n[11]=0,n[12]=(t+r)*i,n[13]=(e+o)*c,n[14]=(a+u)*f,n[15]=1,n}function Y(n,t,r,o){var e,u,i,c,f,s,h,M,d,m,p=t[0],v=t[1],_=t[2],b=o[0],P=o[1],x=o[2],y=r[0],g=r[1],w=r[2];return Math.abs(p-y)<a&&Math.abs(v-g)<a&&Math.abs(_-w)<a?l(n):(h=p-y,M=v-g,d=_-w,e=P*(d*=m=1/Math.hypot(h,M,d))-x*(M*=m),u=x*(h*=m)-b*d,i=b*M-P*h,(m=Math.hypot(e,u,i))?(e*=m=1/m,u*=m,i*=m):(e=0,u=0,i=0),c=M*i-d*u,f=d*e-h*i,s=h*u-M*e,(m=Math.hypot(c,f,s))?(c*=m=1/m,f*=m,s*=m):(c=0,f=0,s=0),n[0]=e,n[1]=c,n[2]=h,n[3]=0,n[4]=u,n[5]=f,n[6]=M,n[7]=0,n[8]=i,n[9]=s,n[10]=d,n[11]=0,n[12]=-(e*p+u*v+i*_),n[13]=-(c*p+f*v+s*_),n[14]=-(h*p+M*v+d*_),n[15]=1,n)}function k(n,t,r,o){var e=t[0],u=t[1],a=t[2],i=o[0],c=o[1],f=o[2],s=e-r[0],h=u-r[1],M=a-r[2],d=s*s+h*h+M*M;d>0&&(s*=d=1/Math.sqrt(d),h*=d,M*=d);var l=c*M-f*h,m=f*s-i*M,p=i*h-c*s;return(d=l*l+m*m+p*p)>0&&(l*=d=1/Math.sqrt(d),m*=d,p*=d),n[0]=l,n[1]=m,n[2]=p,n[3]=0,n[4]=h*p-M*m,n[5]=M*l-s*p,n[6]=s*m-h*l,n[7]=0,n[8]=s,n[9]=h,n[10]=M,n[11]=0,n[12]=e,n[13]=u,n[14]=a,n[15]=1,n}function G(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"}function B(n){return Math.hypot(n[0],n[1],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])}function H(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n[3]=t[3]+r[3],n[4]=t[4]+r[4],n[5]=t[5]+r[5],n[6]=t[6]+r[6],n[7]=t[7]+r[7],n[8]=t[8]+r[8],n[9]=t[9]+r[9],n[10]=t[10]+r[10],n[11]=t[11]+r[11],n[12]=t[12]+r[12],n[13]=t[13]+r[13],n[14]=t[14]+r[14],n[15]=t[15]+r[15],n}function J(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n[3]=t[3]-r[3],n[4]=t[4]-r[4],n[5]=t[5]-r[5],n[6]=t[6]-r[6],n[7]=t[7]-r[7],n[8]=t[8]-r[8],n[9]=t[9]-r[9],n[10]=t[10]-r[10],n[11]=t[11]-r[11],n[12]=t[12]-r[12],n[13]=t[13]-r[13],n[14]=t[14]-r[14],n[15]=t[15]-r[15],n}function K(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n[4]=t[4]*r,n[5]=t[5]*r,n[6]=t[6]*r,n[7]=t[7]*r,n[8]=t[8]*r,n[9]=t[9]*r,n[10]=t[10]*r,n[11]=t[11]*r,n[12]=t[12]*r,n[13]=t[13]*r,n[14]=t[14]*r,n[15]=t[15]*r,n}function N(n,t,r,o){return n[0]=t[0]+r[0]*o,n[1]=t[1]+r[1]*o,n[2]=t[2]+r[2]*o,n[3]=t[3]+r[3]*o,n[4]=t[4]+r[4]*o,n[5]=t[5]+r[5]*o,n[6]=t[6]+r[6]*o,n[7]=t[7]+r[7]*o,n[8]=t[8]+r[8]*o,n[9]=t[9]+r[9]*o,n[10]=t[10]+r[10]*o,n[11]=t[11]+r[11]*o,n[12]=t[12]+r[12]*o,n[13]=t[13]+r[13]*o,n[14]=t[14]+r[14]*o,n[15]=t[15]+r[15]*o,n}function U(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]&&n[9]===t[9]&&n[10]===t[10]&&n[11]===t[11]&&n[12]===t[12]&&n[13]===t[13]&&n[14]===t[14]&&n[15]===t[15]}function $(n,t){var r=n[0],o=n[1],e=n[2],u=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],M=n[9],d=n[10],l=n[11],m=n[12],p=n[13],v=n[14],_=n[15],b=t[0],P=t[1],x=t[2],y=t[3],g=t[4],w=t[5],C=t[6],A=t[7],O=t[8],R=t[9],L=t[10],I=t[11],T=t[12],q=t[13],E=t[14],j=t[15];return Math.abs(r-b)<=a*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-P)<=a*Math.max(1,Math.abs(o),Math.abs(P))&&Math.abs(e-x)<=a*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(u-y)<=a*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(i-g)<=a*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(c-w)<=a*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(f-C)<=a*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(s-A)<=a*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(h-O)<=a*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(M-R)<=a*Math.max(1,Math.abs(M),Math.abs(R))&&Math.abs(d-L)<=a*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(l-I)<=a*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(m-T)<=a*Math.max(1,Math.abs(m),Math.abs(T))&&Math.abs(p-q)<=a*Math.max(1,Math.abs(p),Math.abs(q))&&Math.abs(v-E)<=a*Math.max(1,Math.abs(v),Math.abs(E))&&Math.abs(_-j)<=a*Math.max(1,Math.abs(_),Math.abs(j))}Math.hypot||(Math.hypot=function(){for(var n=0,t=arguments.length;t--;)n+=arguments[t]*arguments[t];return Math.sqrt(n)});var nn=b,tn=J;function rn(){var n=new i(3);return i!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function on(n){var t=new i(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function en(n){var t=n[0],r=n[1],o=n[2];return Math.hypot(t,r,o)}function un(n,t,r){var o=new i(3);return o[0]=n,o[1]=t,o[2]=r,o}function an(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function cn(n,t,r,o){return n[0]=t,n[1]=r,n[2]=o,n}function fn(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n}function sn(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n}function hn(n,t,r){return n[0]=t[0]*r[0],n[1]=t[1]*r[1],n[2]=t[2]*r[2],n}function Mn(n,t,r){return n[0]=t[0]/r[0],n[1]=t[1]/r[1],n[2]=t[2]/r[2],n}function dn(n,t){return n[0]=Math.ceil(t[0]),n[1]=Math.ceil(t[1]),n[2]=Math.ceil(t[2]),n}function ln(n,t){return n[0]=Math.floor(t[0]),n[1]=Math.floor(t[1]),n[2]=Math.floor(t[2]),n}function mn(n,t,r){return n[0]=Math.min(t[0],r[0]),n[1]=Math.min(t[1],r[1]),n[2]=Math.min(t[2],r[2]),n}function pn(n,t,r){return n[0]=Math.max(t[0],r[0]),n[1]=Math.max(t[1],r[1]),n[2]=Math.max(t[2],r[2]),n}function vn(n,t){return n[0]=Math.round(t[0]),n[1]=Math.round(t[1]),n[2]=Math.round(t[2]),n}function _n(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n}function bn(n,t,r,o){return n[0]=t[0]+r[0]*o,n[1]=t[1]+r[1]*o,n[2]=t[2]+r[2]*o,n}function Pn(n,t){var r=t[0]-n[0],o=t[1]-n[1],e=t[2]-n[2];return Math.hypot(r,o,e)}function xn(n,t){var r=t[0]-n[0],o=t[1]-n[1],e=t[2]-n[2];return r*r+o*o+e*e}function yn(n){var t=n[0],r=n[1],o=n[2];return t*t+r*r+o*o}function gn(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n}function wn(n,t){return n[0]=1/t[0],n[1]=1/t[1],n[2]=1/t[2],n}function Cn(n,t){var r=t[0],o=t[1],e=t[2],u=r*r+o*o+e*e;return u>0&&(u=1/Math.sqrt(u)),n[0]=t[0]*u,n[1]=t[1]*u,n[2]=t[2]*u,n}function An(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function On(n,t,r){var o=t[0],e=t[1],u=t[2],a=r[0],i=r[1],c=r[2];return n[0]=e*c-u*i,n[1]=u*a-o*c,n[2]=o*i-e*a,n}function Rn(n,t,r,o){var e=t[0],u=t[1],a=t[2];return n[0]=e+o*(r[0]-e),n[1]=u+o*(r[1]-u),n[2]=a+o*(r[2]-a),n}function Ln(n,t,r,o,e,u){var a=u*u,i=a*(2*u-3)+1,c=a*(u-2)+u,f=a*(u-1),s=a*(3-2*u);return n[0]=t[0]*i+r[0]*c+o[0]*f+e[0]*s,n[1]=t[1]*i+r[1]*c+o[1]*f+e[1]*s,n[2]=t[2]*i+r[2]*c+o[2]*f+e[2]*s,n}function In(n,t,r,o,e,u){var a=1-u,i=a*a,c=u*u,f=i*a,s=3*u*i,h=3*c*a,M=c*u;return n[0]=t[0]*f+r[0]*s+o[0]*h+e[0]*M,n[1]=t[1]*f+r[1]*s+o[1]*h+e[1]*M,n[2]=t[2]*f+r[2]*s+o[2]*h+e[2]*M,n}function Tn(n,t){t=t||1;var r=2*c()*Math.PI,o=2*c()-1,e=Math.sqrt(1-o*o)*t;return n[0]=Math.cos(r)*e,n[1]=Math.sin(r)*e,n[2]=o*t,n}function qn(n,t,r){var o=t[0],e=t[1],u=t[2],a=r[3]*o+r[7]*e+r[11]*u+r[15];return a=a||1,n[0]=(r[0]*o+r[4]*e+r[8]*u+r[12])/a,n[1]=(r[1]*o+r[5]*e+r[9]*u+r[13])/a,n[2]=(r[2]*o+r[6]*e+r[10]*u+r[14])/a,n}function En(n,t,r){var o=t[0],e=t[1],u=t[2];return n[0]=o*r[0]+e*r[3]+u*r[6],n[1]=o*r[1]+e*r[4]+u*r[7],n[2]=o*r[2]+e*r[5]+u*r[8],n}function jn(n,t,r){var o=r[0],e=r[1],u=r[2],a=r[3],i=t[0],c=t[1],f=t[2],s=e*f-u*c,h=u*i-o*f,M=o*c-e*i,d=e*M-u*h,l=u*s-o*M,m=o*h-e*s,p=2*a;return s*=p,h*=p,M*=p,d*=2,l*=2,m*=2,n[0]=i+s+d,n[1]=c+h+l,n[2]=f+M+m,n}function Sn(n,t,r,o){var e=[],u=[];return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],u[0]=e[0],u[1]=e[1]*Math.cos(o)-e[2]*Math.sin(o),u[2]=e[1]*Math.sin(o)+e[2]*Math.cos(o),n[0]=u[0]+r[0],n[1]=u[1]+r[1],n[2]=u[2]+r[2],n}function Dn(n,t,r,o){var e=[],u=[];return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],u[0]=e[2]*Math.sin(o)+e[0]*Math.cos(o),u[1]=e[1],u[2]=e[2]*Math.cos(o)-e[0]*Math.sin(o),n[0]=u[0]+r[0],n[1]=u[1]+r[1],n[2]=u[2]+r[2],n}function Fn(n,t,r,o){var e=[],u=[];return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],u[0]=e[0]*Math.cos(o)-e[1]*Math.sin(o),u[1]=e[0]*Math.sin(o)+e[1]*Math.cos(o),u[2]=e[2],n[0]=u[0]+r[0],n[1]=u[1]+r[1],n[2]=u[2]+r[2],n}function Wn(n,t){var r=un(n[0],n[1],n[2]),o=un(t[0],t[1],t[2]);Cn(r,r),Cn(o,o);var e=An(r,o);return e>1?0:e<-1?Math.PI:Math.acos(e)}function Zn(n){return n[0]=0,n[1]=0,n[2]=0,n}function zn(n){return"vec3("+n[0]+", "+n[1]+", "+n[2]+")"}function Vn(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]}function Qn(n,t){var r=n[0],o=n[1],e=n[2],u=t[0],i=t[1],c=t[2];return Math.abs(r-u)<=a*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-i)<=a*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(e-c)<=a*Math.max(1,Math.abs(e),Math.abs(c))}var Xn,Yn=sn,kn=hn,Gn=Mn,Bn=Pn,Hn=xn,Jn=en,Kn=yn,Nn=(Xn=rn(),function(n,t,r,o,e,u){var a,i;for(t||(t=3),r||(r=0),i=o?Math.min(o*t+r,n.length):n.length,a=r;a<i;a+=t)Xn[0]=n[a],Xn[1]=n[a+1],Xn[2]=n[a+2],e(Xn,Xn,u),n[a]=Xn[0],n[a+1]=Xn[1],n[a+2]=Xn[2];return n});function Un(){var n=new i(4);return i!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function $n(n){var t=new i(4);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function nt(n,t,r,o){var e=new i(4);return e[0]=n,e[1]=t,e[2]=r,e[3]=o,e}function tt(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function rt(n,t,r,o,e){return n[0]=t,n[1]=r,n[2]=o,n[3]=e,n}function ot(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n[3]=t[3]+r[3],n}function et(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n[3]=t[3]-r[3],n}function ut(n,t,r){return n[0]=t[0]*r[0],n[1]=t[1]*r[1],n[2]=t[2]*r[2],n[3]=t[3]*r[3],n}function at(n,t,r){return n[0]=t[0]/r[0],n[1]=t[1]/r[1],n[2]=t[2]/r[2],n[3]=t[3]/r[3],n}function it(n,t){return n[0]=Math.ceil(t[0]),n[1]=Math.ceil(t[1]),n[2]=Math.ceil(t[2]),n[3]=Math.ceil(t[3]),n}function ct(n,t){return n[0]=Math.floor(t[0]),n[1]=Math.floor(t[1]),n[2]=Math.floor(t[2]),n[3]=Math.floor(t[3]),n}function ft(n,t,r){return n[0]=Math.min(t[0],r[0]),n[1]=Math.min(t[1],r[1]),n[2]=Math.min(t[2],r[2]),n[3]=Math.min(t[3],r[3]),n}function st(n,t,r){return n[0]=Math.max(t[0],r[0]),n[1]=Math.max(t[1],r[1]),n[2]=Math.max(t[2],r[2]),n[3]=Math.max(t[3],r[3]),n}function ht(n,t){return n[0]=Math.round(t[0]),n[1]=Math.round(t[1]),n[2]=Math.round(t[2]),n[3]=Math.round(t[3]),n}function Mt(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n}function dt(n,t,r,o){return n[0]=t[0]+r[0]*o,n[1]=t[1]+r[1]*o,n[2]=t[2]+r[2]*o,n[3]=t[3]+r[3]*o,n}function lt(n,t){var r=t[0]-n[0],o=t[1]-n[1],e=t[2]-n[2],u=t[3]-n[3];return Math.hypot(r,o,e,u)}function mt(n,t){var r=t[0]-n[0],o=t[1]-n[1],e=t[2]-n[2],u=t[3]-n[3];return r*r+o*o+e*e+u*u}function pt(n){var t=n[0],r=n[1],o=n[2],e=n[3];return Math.hypot(t,r,o,e)}function vt(n){var t=n[0],r=n[1],o=n[2],e=n[3];return t*t+r*r+o*o+e*e}function _t(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=-t[3],n}function bt(n,t){return n[0]=1/t[0],n[1]=1/t[1],n[2]=1/t[2],n[3]=1/t[3],n}function Pt(n,t){var r=t[0],o=t[1],e=t[2],u=t[3],a=r*r+o*o+e*e+u*u;return a>0&&(a=1/Math.sqrt(a)),n[0]=r*a,n[1]=o*a,n[2]=e*a,n[3]=u*a,n}function xt(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function yt(n,t,r,o){var e=r[0]*o[1]-r[1]*o[0],u=r[0]*o[2]-r[2]*o[0],a=r[0]*o[3]-r[3]*o[0],i=r[1]*o[2]-r[2]*o[1],c=r[1]*o[3]-r[3]*o[1],f=r[2]*o[3]-r[3]*o[2],s=t[0],h=t[1],M=t[2],d=t[3];return n[0]=h*f-M*c+d*i,n[1]=-s*f+M*a-d*u,n[2]=s*c-h*a+d*e,n[3]=-s*i+h*u-M*e,n}function gt(n,t,r,o){var e=t[0],u=t[1],a=t[2],i=t[3];return n[0]=e+o*(r[0]-e),n[1]=u+o*(r[1]-u),n[2]=a+o*(r[2]-a),n[3]=i+o*(r[3]-i),n}function wt(n,t){var r,o,e,u,a,i;t=t||1;do{a=(r=2*c()-1)*r+(o=2*c()-1)*o}while(a>=1);do{i=(e=2*c()-1)*e+(u=2*c()-1)*u}while(i>=1);var f=Math.sqrt((1-a)/i);return n[0]=t*r,n[1]=t*o,n[2]=t*e*f,n[3]=t*u*f,n}function Ct(n,t,r){var o=t[0],e=t[1],u=t[2],a=t[3];return n[0]=r[0]*o+r[4]*e+r[8]*u+r[12]*a,n[1]=r[1]*o+r[5]*e+r[9]*u+r[13]*a,n[2]=r[2]*o+r[6]*e+r[10]*u+r[14]*a,n[3]=r[3]*o+r[7]*e+r[11]*u+r[15]*a,n}function At(n,t,r){var o=t[0],e=t[1],u=t[2],a=r[0],i=r[1],c=r[2],f=r[3],s=f*o+i*u-c*e,h=f*e+c*o-a*u,M=f*u+a*e-i*o,d=-a*o-i*e-c*u;return n[0]=s*f+d*-a+h*-c-M*-i,n[1]=h*f+d*-i+M*-a-s*-c,n[2]=M*f+d*-c+s*-i-h*-a,n[3]=t[3],n}function Ot(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n}function Rt(n){return"vec4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}function Lt(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]}function It(n,t){var r=n[0],o=n[1],e=n[2],u=n[3],i=t[0],c=t[1],f=t[2],s=t[3];return Math.abs(r-i)<=a*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(o-c)<=a*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(e-f)<=a*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(u-s)<=a*Math.max(1,Math.abs(u),Math.abs(s))}var Tt=et,qt=ut,Et=at,jt=lt,St=mt,Dt=pt,Ft=vt,Wt=function(){var n=Un();return function(t,r,o,e,u,a){var i,c;for(r||(r=4),o||(o=0),c=e?Math.min(e*r+o,t.length):t.length,i=o;i<c;i+=r)n[0]=t[i],n[1]=t[i+1],n[2]=t[i+2],n[3]=t[i+3],u(n,n,a),t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2],t[i+3]=n[3];return t}}();r.d(t,"pico_mercator_highPrecisionMat4",(function(){return Jt})),r.d(t,"pico_mercator_injectGLSLProjection",(function(){return Kt})),r.d(t,"pico_mercator_uniforms",(function(){return Nt})),r.d(t,"pico_mercator_mapboxViewMatrix",(function(){return Ut})),r.d(t,"pico_mercator_mapboxProjectionMatrix",(function(){return $t})),r.d(t,"pico_mercator_pixelsPerMeter",(function(){return nr})),r.d(t,"pico_mercator_pixelsPerDegree",(function(){return tr})),r.d(t,"pico_mercator_lngLatToWorld",(function(){return rr})),r.d(t,"pico_mercator_worldToClip",(function(){return or})),r.d(t,"pico_mercator_lngLatToClip",(function(){return er}));const Zt=Math.PI,zt=Zt/4,Vt=Zt/180,Qt=512,Xt=4003e4,Yt="\nconst float PICO_MERCATOR_TILE_SIZE = 512.0;\nconst float PICO_MERCATOR_PI = 3.1415926536;\nconst float PICO_MERCATOR_WORLD_SCALE = PICO_MERCATOR_TILE_SIZE / (PICO_MERCATOR_PI * 2.0);\n\nuniform vec2 pico_mercator_lngLatCenter;\nuniform vec2 pico_mercator_pixelsPerDegree;\nuniform float pico_mercator_scale;\nuniform vec4 pico_mercator_clipCenter;\nuniform mat4 pico_mercator_viewProjectionMatrix;\n\nvec4 pico_mercator_lngLatToWorld(vec2 lngLatPosition) {\n    vec2 mercatorPosition;\n    if (pico_mercator_scale < 2048.0) {\n        mercatorPosition = vec2(\n            (radians(lngLatPosition.x) + PICO_MERCATOR_PI) * PICO_MERCATOR_WORLD_SCALE,\n            (PICO_MERCATOR_PI + log(tan(PICO_MERCATOR_PI * 0.25 + radians(lngLatPosition.y) * 0.5))) * PICO_MERCATOR_WORLD_SCALE\n        );\n    } else {\n        mercatorPosition = (lngLatPosition - pico_mercator_lngLatCenter) * pico_mercator_pixelsPerDegree;\n    }\n\n    return vec4(mercatorPosition, 0.0, 1.0);\n}\n\nvec4 pico_mercator_worldToClip(vec4 worldPosition) {\n    if (pico_mercator_scale >= 2048.0) {\n        worldPosition.w = 0.0;\n    }\n    vec4 clipPosition = pico_mercator_viewProjectionMatrix * worldPosition;\n    if (pico_mercator_scale >= 2048.0) {\n        clipPosition += pico_mercator_clipCenter;\n    }\n\n    return clipPosition;\n}\n\nvec4 pico_mercator_lngLatToClip(vec2 lngLatPosition) {\n    return pico_mercator_worldToClip(pico_mercator_lngLatToWorld(lngLatPosition));\n}\n";let kt=new Float64Array(4),Gt=new Float64Array(3),Bt=new Float64Array(3),Ht={pico_mercator_lngLatCenter:new Float32Array(2),pico_mercator_pixelsPerDegree:new Float32Array(2),pico_mercator_clipCenter:new Float32Array(4),pico_mercator_viewProjectionMatrix:new Float32Array(16),pico_mercator_scale:0};function Jt(){return o.identity(new Float64Array(16))}function Kt(n){let t=n.match(/#version \d+(\s+es)?\s*\n/),r=t?t[0]:"";return n.replace(r,r+Yt)}function Nt(n,t,r,e,u,a){Ht.pico_mercator_scale=Math.pow(2,r),Ht.pico_mercator_lngLatCenter[0]=n,Ht.pico_mercator_lngLatCenter[1]=t,tr(Ht.pico_mercator_pixelsPerDegree,t),er(Ht.pico_mercator_clipCenter,n,t,e,u),o.multiply(Ht.pico_mercator_viewProjectionMatrix,u,e),a(Ht)}function Ut(n,t,r,u,a,i,c){let f=Math.pow(2,u);return o.identity(n),Gt[2]=-1.5*c,o.translate(n,n,Gt),o.rotateX(n,n,-a*Vt),o.rotateZ(n,n,i*Vt),Bt[0]=f,Bt[1]=f,Bt[2]=1,o.scale(n,n,Bt),rr(kt,t,r),o.translate(n,n,e.negate(kt,kt)),n}function $t(n,t,r,e,u=e){let a=1.5*e,i=t*Vt,c=Math.atan(1/3),f=Math.sin(c)*a/Math.sin(Math.PI/2-i-c),s=2*c,h=r/e,M=1.01*(Math.cos(Math.PI/2-i)*f+a);return o.perspective(n,s,h,u,M),n}function nr(n){return Qt/Xt/Math.cos(n*Vt)}function tr(n,t){return n[0]=Qt/360,n[1]=n[0]/Math.cos(t*Vt),n}function rr(n,t,r){let o=r*Vt,e=Qt*(t*Vt+Zt)/(2*Zt),u=Qt*(Zt+Math.log(Math.tan(zt+.5*o)))/(2*Zt);return n[0]=e,n[1]=u,n[2]=0,n[3]=1,n}function or(n,t,r,o){return u.transformMat4(kt,t,r),u.transformMat4(n,kt,o),n}function er(n,t,r,o,e){return rr(kt,t,r),or(n,kt,o,e),n}}})}));
//# sourceMappingURL=pico-mercator.min.js.map