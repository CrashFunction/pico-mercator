/*! 
The MIT License (MIT)

Copyright (c) 2019 Tarek Sherif

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the "Software"), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.PicoMercator=n():t.PicoMercator=n()}(window,(function(){return function(t){var n={};function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)r.d(e,a,function(n){return t[n]}.bind(null,a));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=6)}({6:function(t,n,r){"use strict";r.r(n);var e={};r.r(e),r.d(e,"create",(function(){return f})),r.d(e,"clone",(function(){return s})),r.d(e,"copy",(function(){return h})),r.d(e,"fromValues",(function(){return M})),r.d(e,"set",(function(){return d})),r.d(e,"identity",(function(){return l})),r.d(e,"transpose",(function(){return m})),r.d(e,"invert",(function(){return v})),r.d(e,"adjoint",(function(){return _})),r.d(e,"determinant",(function(){return p})),r.d(e,"multiply",(function(){return b})),r.d(e,"translate",(function(){return g})),r.d(e,"scale",(function(){return y})),r.d(e,"rotate",(function(){return x})),r.d(e,"rotateX",(function(){return P})),r.d(e,"rotateY",(function(){return w})),r.d(e,"rotateZ",(function(){return L})),r.d(e,"fromTranslation",(function(){return C})),r.d(e,"fromScaling",(function(){return A})),r.d(e,"fromRotation",(function(){return T})),r.d(e,"fromXRotation",(function(){return O})),r.d(e,"fromYRotation",(function(){return R})),r.d(e,"fromZRotation",(function(){return E})),r.d(e,"fromRotationTranslation",(function(){return I})),r.d(e,"fromQuat2",(function(){return q})),r.d(e,"getTranslation",(function(){return D})),r.d(e,"getScaling",(function(){return j})),r.d(e,"getRotation",(function(){return S})),r.d(e,"fromRotationTranslationScale",(function(){return F})),r.d(e,"fromRotationTranslationScaleOrigin",(function(){return W})),r.d(e,"fromQuat",(function(){return z})),r.d(e,"frustum",(function(){return Z})),r.d(e,"perspective",(function(){return V})),r.d(e,"perspectiveFromFieldOfView",(function(){return Q})),r.d(e,"ortho",(function(){return X})),r.d(e,"lookAt",(function(){return Y})),r.d(e,"targetTo",(function(){return k})),r.d(e,"str",(function(){return G})),r.d(e,"frob",(function(){return B})),r.d(e,"add",(function(){return H})),r.d(e,"subtract",(function(){return J})),r.d(e,"multiplyScalar",(function(){return K})),r.d(e,"multiplyScalarAndAdd",(function(){return N})),r.d(e,"exactEquals",(function(){return U})),r.d(e,"equals",(function(){return $})),r.d(e,"mul",(function(){return tt})),r.d(e,"sub",(function(){return nt}));var a={};r.r(a),r.d(a,"create",(function(){return rt})),r.d(a,"clone",(function(){return et})),r.d(a,"length",(function(){return at})),r.d(a,"fromValues",(function(){return ot})),r.d(a,"copy",(function(){return ut})),r.d(a,"set",(function(){return it})),r.d(a,"add",(function(){return ct})),r.d(a,"subtract",(function(){return ft})),r.d(a,"multiply",(function(){return st})),r.d(a,"divide",(function(){return ht})),r.d(a,"ceil",(function(){return Mt})),r.d(a,"floor",(function(){return dt})),r.d(a,"min",(function(){return lt})),r.d(a,"max",(function(){return mt})),r.d(a,"round",(function(){return vt})),r.d(a,"scale",(function(){return _t})),r.d(a,"scaleAndAdd",(function(){return pt})),r.d(a,"distance",(function(){return bt})),r.d(a,"squaredDistance",(function(){return gt})),r.d(a,"squaredLength",(function(){return yt})),r.d(a,"negate",(function(){return xt})),r.d(a,"inverse",(function(){return Pt})),r.d(a,"normalize",(function(){return wt})),r.d(a,"dot",(function(){return Lt})),r.d(a,"cross",(function(){return Ct})),r.d(a,"lerp",(function(){return At})),r.d(a,"hermite",(function(){return Tt})),r.d(a,"bezier",(function(){return Ot})),r.d(a,"random",(function(){return Rt})),r.d(a,"transformMat4",(function(){return Et})),r.d(a,"transformMat3",(function(){return It})),r.d(a,"transformQuat",(function(){return qt})),r.d(a,"rotateX",(function(){return Dt})),r.d(a,"rotateY",(function(){return jt})),r.d(a,"rotateZ",(function(){return St})),r.d(a,"angle",(function(){return Ft})),r.d(a,"zero",(function(){return Wt})),r.d(a,"str",(function(){return zt})),r.d(a,"exactEquals",(function(){return Zt})),r.d(a,"equals",(function(){return Vt})),r.d(a,"sub",(function(){return Xt})),r.d(a,"mul",(function(){return Yt})),r.d(a,"div",(function(){return kt})),r.d(a,"dist",(function(){return Gt})),r.d(a,"sqrDist",(function(){return Bt})),r.d(a,"len",(function(){return Ht})),r.d(a,"sqrLen",(function(){return Jt})),r.d(a,"forEach",(function(){return Kt}));var o={};r.r(o),r.d(o,"create",(function(){return Nt})),r.d(o,"clone",(function(){return Ut})),r.d(o,"fromValues",(function(){return $t})),r.d(o,"copy",(function(){return tn})),r.d(o,"set",(function(){return nn})),r.d(o,"add",(function(){return rn})),r.d(o,"subtract",(function(){return en})),r.d(o,"multiply",(function(){return an})),r.d(o,"divide",(function(){return on})),r.d(o,"ceil",(function(){return un})),r.d(o,"floor",(function(){return cn})),r.d(o,"min",(function(){return fn})),r.d(o,"max",(function(){return sn})),r.d(o,"round",(function(){return hn})),r.d(o,"scale",(function(){return Mn})),r.d(o,"scaleAndAdd",(function(){return dn})),r.d(o,"distance",(function(){return ln})),r.d(o,"squaredDistance",(function(){return mn})),r.d(o,"length",(function(){return vn})),r.d(o,"squaredLength",(function(){return _n})),r.d(o,"negate",(function(){return pn})),r.d(o,"inverse",(function(){return bn})),r.d(o,"normalize",(function(){return gn})),r.d(o,"dot",(function(){return yn})),r.d(o,"cross",(function(){return xn})),r.d(o,"lerp",(function(){return Pn})),r.d(o,"random",(function(){return wn})),r.d(o,"transformMat4",(function(){return Ln})),r.d(o,"transformQuat",(function(){return Cn})),r.d(o,"zero",(function(){return An})),r.d(o,"str",(function(){return Tn})),r.d(o,"exactEquals",(function(){return On})),r.d(o,"equals",(function(){return Rn})),r.d(o,"sub",(function(){return En})),r.d(o,"mul",(function(){return In})),r.d(o,"div",(function(){return qn})),r.d(o,"dist",(function(){return Dn})),r.d(o,"sqrDist",(function(){return jn})),r.d(o,"len",(function(){return Sn})),r.d(o,"sqrLen",(function(){return Fn})),r.d(o,"forEach",(function(){return Wn}));var u=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,c=Math.random;Math.PI;function f(){var t=new i(16);return i!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function s(t){var n=new i(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function h(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function M(t,n,r,e,a,o,u,c,f,s,h,M,d,l,m,v){var _=new i(16);return _[0]=t,_[1]=n,_[2]=r,_[3]=e,_[4]=a,_[5]=o,_[6]=u,_[7]=c,_[8]=f,_[9]=s,_[10]=h,_[11]=M,_[12]=d,_[13]=l,_[14]=m,_[15]=v,_}function d(t,n,r,e,a,o,u,i,c,f,s,h,M,d,l,m,v){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t[4]=o,t[5]=u,t[6]=i,t[7]=c,t[8]=f,t[9]=s,t[10]=h,t[11]=M,t[12]=d,t[13]=l,t[14]=m,t[15]=v,t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function m(t,n){if(t===n){var r=n[1],e=n[2],a=n[3],o=n[6],u=n[7],i=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=e,t[9]=o,t[11]=n[14],t[12]=a,t[13]=u,t[14]=i}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function v(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],u=n[4],i=n[5],c=n[6],f=n[7],s=n[8],h=n[9],M=n[10],d=n[11],l=n[12],m=n[13],v=n[14],_=n[15],p=r*i-e*u,b=r*c-a*u,g=r*f-o*u,y=e*c-a*i,x=e*f-o*i,P=a*f-o*c,w=s*m-h*l,L=s*v-M*l,C=s*_-d*l,A=h*v-M*m,T=h*_-d*m,O=M*_-d*v,R=p*O-b*T+g*A+y*C-x*L+P*w;return R?(R=1/R,t[0]=(i*O-c*T+f*A)*R,t[1]=(a*T-e*O-o*A)*R,t[2]=(m*P-v*x+_*y)*R,t[3]=(M*x-h*P-d*y)*R,t[4]=(c*C-u*O-f*L)*R,t[5]=(r*O-a*C+o*L)*R,t[6]=(v*g-l*P-_*b)*R,t[7]=(s*P-M*g+d*b)*R,t[8]=(u*T-i*C+f*w)*R,t[9]=(e*C-r*T-o*w)*R,t[10]=(l*x-m*g+_*p)*R,t[11]=(h*g-s*x-d*p)*R,t[12]=(i*L-u*A-c*w)*R,t[13]=(r*A-e*L+a*w)*R,t[14]=(m*b-l*y-v*p)*R,t[15]=(s*y-h*b+M*p)*R,t):null}function _(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],u=n[4],i=n[5],c=n[6],f=n[7],s=n[8],h=n[9],M=n[10],d=n[11],l=n[12],m=n[13],v=n[14],_=n[15];return t[0]=i*(M*_-d*v)-h*(c*_-f*v)+m*(c*d-f*M),t[1]=-(e*(M*_-d*v)-h*(a*_-o*v)+m*(a*d-o*M)),t[2]=e*(c*_-f*v)-i*(a*_-o*v)+m*(a*f-o*c),t[3]=-(e*(c*d-f*M)-i*(a*d-o*M)+h*(a*f-o*c)),t[4]=-(u*(M*_-d*v)-s*(c*_-f*v)+l*(c*d-f*M)),t[5]=r*(M*_-d*v)-s*(a*_-o*v)+l*(a*d-o*M),t[6]=-(r*(c*_-f*v)-u*(a*_-o*v)+l*(a*f-o*c)),t[7]=r*(c*d-f*M)-u*(a*d-o*M)+s*(a*f-o*c),t[8]=u*(h*_-d*m)-s*(i*_-f*m)+l*(i*d-f*h),t[9]=-(r*(h*_-d*m)-s*(e*_-o*m)+l*(e*d-o*h)),t[10]=r*(i*_-f*m)-u*(e*_-o*m)+l*(e*f-o*i),t[11]=-(r*(i*d-f*h)-u*(e*d-o*h)+s*(e*f-o*i)),t[12]=-(u*(h*v-M*m)-s*(i*v-c*m)+l*(i*M-c*h)),t[13]=r*(h*v-M*m)-s*(e*v-a*m)+l*(e*M-a*h),t[14]=-(r*(i*v-c*m)-u*(e*v-a*m)+l*(e*c-a*i)),t[15]=r*(i*M-c*h)-u*(e*M-a*h)+s*(e*c-a*i),t}function p(t){var n=t[0],r=t[1],e=t[2],a=t[3],o=t[4],u=t[5],i=t[6],c=t[7],f=t[8],s=t[9],h=t[10],M=t[11],d=t[12],l=t[13],m=t[14],v=t[15];return(n*u-r*o)*(h*v-M*m)-(n*i-e*o)*(s*v-M*l)+(n*c-a*o)*(s*m-h*l)+(r*i-e*u)*(f*v-M*d)-(r*c-a*u)*(f*m-h*d)+(e*c-a*i)*(f*l-s*d)}function b(t,n,r){var e=n[0],a=n[1],o=n[2],u=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],M=n[9],d=n[10],l=n[11],m=n[12],v=n[13],_=n[14],p=n[15],b=r[0],g=r[1],y=r[2],x=r[3];return t[0]=b*e+g*i+y*h+x*m,t[1]=b*a+g*c+y*M+x*v,t[2]=b*o+g*f+y*d+x*_,t[3]=b*u+g*s+y*l+x*p,b=r[4],g=r[5],y=r[6],x=r[7],t[4]=b*e+g*i+y*h+x*m,t[5]=b*a+g*c+y*M+x*v,t[6]=b*o+g*f+y*d+x*_,t[7]=b*u+g*s+y*l+x*p,b=r[8],g=r[9],y=r[10],x=r[11],t[8]=b*e+g*i+y*h+x*m,t[9]=b*a+g*c+y*M+x*v,t[10]=b*o+g*f+y*d+x*_,t[11]=b*u+g*s+y*l+x*p,b=r[12],g=r[13],y=r[14],x=r[15],t[12]=b*e+g*i+y*h+x*m,t[13]=b*a+g*c+y*M+x*v,t[14]=b*o+g*f+y*d+x*_,t[15]=b*u+g*s+y*l+x*p,t}function g(t,n,r){var e,a,o,u,i,c,f,s,h,M,d,l,m=r[0],v=r[1],_=r[2];return n===t?(t[12]=n[0]*m+n[4]*v+n[8]*_+n[12],t[13]=n[1]*m+n[5]*v+n[9]*_+n[13],t[14]=n[2]*m+n[6]*v+n[10]*_+n[14],t[15]=n[3]*m+n[7]*v+n[11]*_+n[15]):(e=n[0],a=n[1],o=n[2],u=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],M=n[9],d=n[10],l=n[11],t[0]=e,t[1]=a,t[2]=o,t[3]=u,t[4]=i,t[5]=c,t[6]=f,t[7]=s,t[8]=h,t[9]=M,t[10]=d,t[11]=l,t[12]=e*m+i*v+h*_+n[12],t[13]=a*m+c*v+M*_+n[13],t[14]=o*m+f*v+d*_+n[14],t[15]=u*m+s*v+l*_+n[15]),t}function y(t,n,r){var e=r[0],a=r[1],o=r[2];return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function x(t,n,r,e){var a,o,i,c,f,s,h,M,d,l,m,v,_,p,b,g,y,x,P,w,L,C,A,T,O=e[0],R=e[1],E=e[2],I=Math.hypot(O,R,E);return I<u?null:(O*=I=1/I,R*=I,E*=I,a=Math.sin(r),i=1-(o=Math.cos(r)),c=n[0],f=n[1],s=n[2],h=n[3],M=n[4],d=n[5],l=n[6],m=n[7],v=n[8],_=n[9],p=n[10],b=n[11],g=O*O*i+o,y=R*O*i+E*a,x=E*O*i-R*a,P=O*R*i-E*a,w=R*R*i+o,L=E*R*i+O*a,C=O*E*i+R*a,A=R*E*i-O*a,T=E*E*i+o,t[0]=c*g+M*y+v*x,t[1]=f*g+d*y+_*x,t[2]=s*g+l*y+p*x,t[3]=h*g+m*y+b*x,t[4]=c*P+M*w+v*L,t[5]=f*P+d*w+_*L,t[6]=s*P+l*w+p*L,t[7]=h*P+m*w+b*L,t[8]=c*C+M*A+v*T,t[9]=f*C+d*A+_*T,t[10]=s*C+l*A+p*T,t[11]=h*C+m*A+b*T,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function P(t,n,r){var e=Math.sin(r),a=Math.cos(r),o=n[4],u=n[5],i=n[6],c=n[7],f=n[8],s=n[9],h=n[10],M=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*a+f*e,t[5]=u*a+s*e,t[6]=i*a+h*e,t[7]=c*a+M*e,t[8]=f*a-o*e,t[9]=s*a-u*e,t[10]=h*a-i*e,t[11]=M*a-c*e,t}function w(t,n,r){var e=Math.sin(r),a=Math.cos(r),o=n[0],u=n[1],i=n[2],c=n[3],f=n[8],s=n[9],h=n[10],M=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a-f*e,t[1]=u*a-s*e,t[2]=i*a-h*e,t[3]=c*a-M*e,t[8]=o*e+f*a,t[9]=u*e+s*a,t[10]=i*e+h*a,t[11]=c*e+M*a,t}function L(t,n,r){var e=Math.sin(r),a=Math.cos(r),o=n[0],u=n[1],i=n[2],c=n[3],f=n[4],s=n[5],h=n[6],M=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a+f*e,t[1]=u*a+s*e,t[2]=i*a+h*e,t[3]=c*a+M*e,t[4]=f*a-o*e,t[5]=s*a-u*e,t[6]=h*a-i*e,t[7]=M*a-c*e,t}function C(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function A(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,n,r){var e,a,o,i=r[0],c=r[1],f=r[2],s=Math.hypot(i,c,f);return s<u?null:(i*=s=1/s,c*=s,f*=s,e=Math.sin(n),o=1-(a=Math.cos(n)),t[0]=i*i*o+a,t[1]=c*i*o+f*e,t[2]=f*i*o-c*e,t[3]=0,t[4]=i*c*o-f*e,t[5]=c*c*o+a,t[6]=f*c*o+i*e,t[7]=0,t[8]=i*f*o+c*e,t[9]=c*f*o-i*e,t[10]=f*f*o+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function O(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,n,r){var e=n[0],a=n[1],o=n[2],u=n[3],i=e+e,c=a+a,f=o+o,s=e*i,h=e*c,M=e*f,d=a*c,l=a*f,m=o*f,v=u*i,_=u*c,p=u*f;return t[0]=1-(d+m),t[1]=h+p,t[2]=M-_,t[3]=0,t[4]=h-p,t[5]=1-(s+m),t[6]=l+v,t[7]=0,t[8]=M+_,t[9]=l-v,t[10]=1-(s+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function q(t,n){var r=new i(3),e=-n[0],a=-n[1],o=-n[2],u=n[3],c=n[4],f=n[5],s=n[6],h=n[7],M=e*e+a*a+o*o+u*u;return M>0?(r[0]=2*(c*u+h*e+f*o-s*a)/M,r[1]=2*(f*u+h*a+s*e-c*o)/M,r[2]=2*(s*u+h*o+c*a-f*e)/M):(r[0]=2*(c*u+h*e+f*o-s*a),r[1]=2*(f*u+h*a+s*e-c*o),r[2]=2*(s*u+h*o+c*a-f*e)),I(t,n,r),t}function D(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function j(t,n){var r=n[0],e=n[1],a=n[2],o=n[4],u=n[5],i=n[6],c=n[8],f=n[9],s=n[10];return t[0]=Math.hypot(r,e,a),t[1]=Math.hypot(o,u,i),t[2]=Math.hypot(c,f,s),t}function S(t,n){var r=new i(3);j(r,n);var e=1/r[0],a=1/r[1],o=1/r[2],u=n[0]*e,c=n[1]*a,f=n[2]*o,s=n[4]*e,h=n[5]*a,M=n[6]*o,d=n[8]*e,l=n[9]*a,m=n[10]*o,v=u+h+m,_=0;return v>0?(_=2*Math.sqrt(v+1),t[3]=.25*_,t[0]=(M-l)/_,t[1]=(d-f)/_,t[2]=(c-s)/_):u>h&&u>m?(_=2*Math.sqrt(1+u-h-m),t[3]=(M-l)/_,t[0]=.25*_,t[1]=(c+s)/_,t[2]=(d+f)/_):h>m?(_=2*Math.sqrt(1+h-u-m),t[3]=(d-f)/_,t[0]=(c+s)/_,t[1]=.25*_,t[2]=(M+l)/_):(_=2*Math.sqrt(1+m-u-h),t[3]=(c-s)/_,t[0]=(d+f)/_,t[1]=(M+l)/_,t[2]=.25*_),t}function F(t,n,r,e){var a=n[0],o=n[1],u=n[2],i=n[3],c=a+a,f=o+o,s=u+u,h=a*c,M=a*f,d=a*s,l=o*f,m=o*s,v=u*s,_=i*c,p=i*f,b=i*s,g=e[0],y=e[1],x=e[2];return t[0]=(1-(l+v))*g,t[1]=(M+b)*g,t[2]=(d-p)*g,t[3]=0,t[4]=(M-b)*y,t[5]=(1-(h+v))*y,t[6]=(m+_)*y,t[7]=0,t[8]=(d+p)*x,t[9]=(m-_)*x,t[10]=(1-(h+l))*x,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function W(t,n,r,e,a){var o=n[0],u=n[1],i=n[2],c=n[3],f=o+o,s=u+u,h=i+i,M=o*f,d=o*s,l=o*h,m=u*s,v=u*h,_=i*h,p=c*f,b=c*s,g=c*h,y=e[0],x=e[1],P=e[2],w=a[0],L=a[1],C=a[2],A=(1-(m+_))*y,T=(d+g)*y,O=(l-b)*y,R=(d-g)*x,E=(1-(M+_))*x,I=(v+p)*x,q=(l+b)*P,D=(v-p)*P,j=(1-(M+m))*P;return t[0]=A,t[1]=T,t[2]=O,t[3]=0,t[4]=R,t[5]=E,t[6]=I,t[7]=0,t[8]=q,t[9]=D,t[10]=j,t[11]=0,t[12]=r[0]+w-(A*w+R*L+q*C),t[13]=r[1]+L-(T*w+E*L+D*C),t[14]=r[2]+C-(O*w+I*L+j*C),t[15]=1,t}function z(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],u=r+r,i=e+e,c=a+a,f=r*u,s=e*u,h=e*i,M=a*u,d=a*i,l=a*c,m=o*u,v=o*i,_=o*c;return t[0]=1-h-l,t[1]=s+_,t[2]=M-v,t[3]=0,t[4]=s-_,t[5]=1-f-l,t[6]=d+m,t[7]=0,t[8]=M+v,t[9]=d-m,t[10]=1-f-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Z(t,n,r,e,a,o,u){var i=1/(r-n),c=1/(a-e),f=1/(o-u);return t[0]=2*o*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(r+n)*i,t[9]=(a+e)*c,t[10]=(u+o)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*o*2*f,t[15]=0,t}function V(t,n,r,e,a){var o,u=1/Math.tan(n/2);return t[0]=u/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(o=1/(e-a),t[10]=(a+e)*o,t[14]=2*a*e*o):(t[10]=-1,t[14]=-2*e),t}function Q(t,n,r,e){var a=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),u=Math.tan(n.leftDegrees*Math.PI/180),i=Math.tan(n.rightDegrees*Math.PI/180),c=2/(u+i),f=2/(a+o);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(u-i)*c*.5,t[9]=(a-o)*f*.5,t[10]=e/(r-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*r/(r-e),t[15]=0,t}function X(t,n,r,e,a,o,u){var i=1/(n-r),c=1/(e-a),f=1/(o-u);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(n+r)*i,t[13]=(a+e)*c,t[14]=(u+o)*f,t[15]=1,t}function Y(t,n,r,e){var a,o,i,c,f,s,h,M,d,m,v=n[0],_=n[1],p=n[2],b=e[0],g=e[1],y=e[2],x=r[0],P=r[1],w=r[2];return Math.abs(v-x)<u&&Math.abs(_-P)<u&&Math.abs(p-w)<u?l(t):(h=v-x,M=_-P,d=p-w,a=g*(d*=m=1/Math.hypot(h,M,d))-y*(M*=m),o=y*(h*=m)-b*d,i=b*M-g*h,(m=Math.hypot(a,o,i))?(a*=m=1/m,o*=m,i*=m):(a=0,o=0,i=0),c=M*i-d*o,f=d*a-h*i,s=h*o-M*a,(m=Math.hypot(c,f,s))?(c*=m=1/m,f*=m,s*=m):(c=0,f=0,s=0),t[0]=a,t[1]=c,t[2]=h,t[3]=0,t[4]=o,t[5]=f,t[6]=M,t[7]=0,t[8]=i,t[9]=s,t[10]=d,t[11]=0,t[12]=-(a*v+o*_+i*p),t[13]=-(c*v+f*_+s*p),t[14]=-(h*v+M*_+d*p),t[15]=1,t)}function k(t,n,r,e){var a=n[0],o=n[1],u=n[2],i=e[0],c=e[1],f=e[2],s=a-r[0],h=o-r[1],M=u-r[2],d=s*s+h*h+M*M;d>0&&(s*=d=1/Math.sqrt(d),h*=d,M*=d);var l=c*M-f*h,m=f*s-i*M,v=i*h-c*s;return(d=l*l+m*m+v*v)>0&&(l*=d=1/Math.sqrt(d),m*=d,v*=d),t[0]=l,t[1]=m,t[2]=v,t[3]=0,t[4]=h*v-M*m,t[5]=M*l-s*v,t[6]=s*m-h*l,t[7]=0,t[8]=s,t[9]=h,t[10]=M,t[11]=0,t[12]=a,t[13]=o,t[14]=u,t[15]=1,t}function G(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function B(t){return Math.hypot(t[0],t[1],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function H(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t[9]=n[9]+r[9],t[10]=n[10]+r[10],t[11]=n[11]+r[11],t[12]=n[12]+r[12],t[13]=n[13]+r[13],t[14]=n[14]+r[14],t[15]=n[15]+r[15],t}function J(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t[9]=n[9]-r[9],t[10]=n[10]-r[10],t[11]=n[11]-r[11],t[12]=n[12]-r[12],t[13]=n[13]-r[13],t[14]=n[14]-r[14],t[15]=n[15]-r[15],t}function K(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12]*r,t[13]=n[13]*r,t[14]=n[14]*r,t[15]=n[15]*r,t}function N(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t[9]=n[9]+r[9]*e,t[10]=n[10]+r[10]*e,t[11]=n[11]+r[11]*e,t[12]=n[12]+r[12]*e,t[13]=n[13]+r[13]*e,t[14]=n[14]+r[14]*e,t[15]=n[15]+r[15]*e,t}function U(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function $(t,n){var r=t[0],e=t[1],a=t[2],o=t[3],i=t[4],c=t[5],f=t[6],s=t[7],h=t[8],M=t[9],d=t[10],l=t[11],m=t[12],v=t[13],_=t[14],p=t[15],b=n[0],g=n[1],y=n[2],x=n[3],P=n[4],w=n[5],L=n[6],C=n[7],A=n[8],T=n[9],O=n[10],R=n[11],E=n[12],I=n[13],q=n[14],D=n[15];return Math.abs(r-b)<=u*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(e-g)<=u*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(a-y)<=u*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(o-x)<=u*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(i-P)<=u*Math.max(1,Math.abs(i),Math.abs(P))&&Math.abs(c-w)<=u*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(f-L)<=u*Math.max(1,Math.abs(f),Math.abs(L))&&Math.abs(s-C)<=u*Math.max(1,Math.abs(s),Math.abs(C))&&Math.abs(h-A)<=u*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(M-T)<=u*Math.max(1,Math.abs(M),Math.abs(T))&&Math.abs(d-O)<=u*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(l-R)<=u*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(m-E)<=u*Math.max(1,Math.abs(m),Math.abs(E))&&Math.abs(v-I)<=u*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(_-q)<=u*Math.max(1,Math.abs(_),Math.abs(q))&&Math.abs(p-D)<=u*Math.max(1,Math.abs(p),Math.abs(D))}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var tt=b,nt=J;function rt(){var t=new i(3);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function et(t){var n=new i(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function at(t){var n=t[0],r=t[1],e=t[2];return Math.hypot(n,r,e)}function ot(t,n,r){var e=new i(3);return e[0]=t,e[1]=n,e[2]=r,e}function ut(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function it(t,n,r,e){return t[0]=n,t[1]=r,t[2]=e,t}function ct(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t}function ft(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t}function st(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t}function ht(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t}function Mt(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t}function dt(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t}function lt(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t}function mt(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t}function vt(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t}function _t(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t}function pt(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t}function bt(t,n){var r=n[0]-t[0],e=n[1]-t[1],a=n[2]-t[2];return Math.hypot(r,e,a)}function gt(t,n){var r=n[0]-t[0],e=n[1]-t[1],a=n[2]-t[2];return r*r+e*e+a*a}function yt(t){var n=t[0],r=t[1],e=t[2];return n*n+r*r+e*e}function xt(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function Pt(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function wt(t,n){var r=n[0],e=n[1],a=n[2],o=r*r+e*e+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o,t}function Lt(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Ct(t,n,r){var e=n[0],a=n[1],o=n[2],u=r[0],i=r[1],c=r[2];return t[0]=a*c-o*i,t[1]=o*u-e*c,t[2]=e*i-a*u,t}function At(t,n,r,e){var a=n[0],o=n[1],u=n[2];return t[0]=a+e*(r[0]-a),t[1]=o+e*(r[1]-o),t[2]=u+e*(r[2]-u),t}function Tt(t,n,r,e,a,o){var u=o*o,i=u*(2*o-3)+1,c=u*(o-2)+o,f=u*(o-1),s=u*(3-2*o);return t[0]=n[0]*i+r[0]*c+e[0]*f+a[0]*s,t[1]=n[1]*i+r[1]*c+e[1]*f+a[1]*s,t[2]=n[2]*i+r[2]*c+e[2]*f+a[2]*s,t}function Ot(t,n,r,e,a,o){var u=1-o,i=u*u,c=o*o,f=i*u,s=3*o*i,h=3*c*u,M=c*o;return t[0]=n[0]*f+r[0]*s+e[0]*h+a[0]*M,t[1]=n[1]*f+r[1]*s+e[1]*h+a[1]*M,t[2]=n[2]*f+r[2]*s+e[2]*h+a[2]*M,t}function Rt(t,n){n=n||1;var r=2*c()*Math.PI,e=2*c()-1,a=Math.sqrt(1-e*e)*n;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=e*n,t}function Et(t,n,r){var e=n[0],a=n[1],o=n[2],u=r[3]*e+r[7]*a+r[11]*o+r[15];return u=u||1,t[0]=(r[0]*e+r[4]*a+r[8]*o+r[12])/u,t[1]=(r[1]*e+r[5]*a+r[9]*o+r[13])/u,t[2]=(r[2]*e+r[6]*a+r[10]*o+r[14])/u,t}function It(t,n,r){var e=n[0],a=n[1],o=n[2];return t[0]=e*r[0]+a*r[3]+o*r[6],t[1]=e*r[1]+a*r[4]+o*r[7],t[2]=e*r[2]+a*r[5]+o*r[8],t}function qt(t,n,r){var e=r[0],a=r[1],o=r[2],u=r[3],i=n[0],c=n[1],f=n[2],s=a*f-o*c,h=o*i-e*f,M=e*c-a*i,d=a*M-o*h,l=o*s-e*M,m=e*h-a*s,v=2*u;return s*=v,h*=v,M*=v,d*=2,l*=2,m*=2,t[0]=i+s+d,t[1]=c+h+l,t[2]=f+M+m,t}function Dt(t,n,r,e){var a=[],o=[];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],o[0]=a[0],o[1]=a[1]*Math.cos(e)-a[2]*Math.sin(e),o[2]=a[1]*Math.sin(e)+a[2]*Math.cos(e),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function jt(t,n,r,e){var a=[],o=[];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],o[0]=a[2]*Math.sin(e)+a[0]*Math.cos(e),o[1]=a[1],o[2]=a[2]*Math.cos(e)-a[0]*Math.sin(e),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function St(t,n,r,e){var a=[],o=[];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],o[0]=a[0]*Math.cos(e)-a[1]*Math.sin(e),o[1]=a[0]*Math.sin(e)+a[1]*Math.cos(e),o[2]=a[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function Ft(t,n){var r=ot(t[0],t[1],t[2]),e=ot(n[0],n[1],n[2]);wt(r,r),wt(e,e);var a=Lt(r,e);return a>1?0:a<-1?Math.PI:Math.acos(a)}function Wt(t){return t[0]=0,t[1]=0,t[2]=0,t}function zt(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Zt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function Vt(t,n){var r=t[0],e=t[1],a=t[2],o=n[0],i=n[1],c=n[2];return Math.abs(r-o)<=u*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(e-i)<=u*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(a-c)<=u*Math.max(1,Math.abs(a),Math.abs(c))}var Qt,Xt=ft,Yt=st,kt=ht,Gt=bt,Bt=gt,Ht=at,Jt=yt,Kt=(Qt=rt(),function(t,n,r,e,a,o){var u,i;for(n||(n=3),r||(r=0),i=e?Math.min(e*n+r,t.length):t.length,u=r;u<i;u+=n)Qt[0]=t[u],Qt[1]=t[u+1],Qt[2]=t[u+2],a(Qt,Qt,o),t[u]=Qt[0],t[u+1]=Qt[1],t[u+2]=Qt[2];return t});function Nt(){var t=new i(4);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Ut(t){var n=new i(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function $t(t,n,r,e){var a=new i(4);return a[0]=t,a[1]=n,a[2]=r,a[3]=e,a}function tn(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function nn(t,n,r,e,a){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t}function rn(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t}function en(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}function an(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t[3]=n[3]*r[3],t}function on(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t[3]=n[3]/r[3],t}function un(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t}function cn(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t}function fn(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t[3]=Math.min(n[3],r[3]),t}function sn(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t[3]=Math.max(n[3],r[3]),t}function hn(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t}function Mn(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t}function dn(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t}function ln(t,n){var r=n[0]-t[0],e=n[1]-t[1],a=n[2]-t[2],o=n[3]-t[3];return Math.hypot(r,e,a,o)}function mn(t,n){var r=n[0]-t[0],e=n[1]-t[1],a=n[2]-t[2],o=n[3]-t[3];return r*r+e*e+a*a+o*o}function vn(t){var n=t[0],r=t[1],e=t[2],a=t[3];return Math.hypot(n,r,e,a)}function _n(t){var n=t[0],r=t[1],e=t[2],a=t[3];return n*n+r*r+e*e+a*a}function pn(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t}function bn(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t}function gn(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],u=r*r+e*e+a*a+o*o;return u>0&&(u=1/Math.sqrt(u)),t[0]=r*u,t[1]=e*u,t[2]=a*u,t[3]=o*u,t}function yn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function xn(t,n,r,e){var a=r[0]*e[1]-r[1]*e[0],o=r[0]*e[2]-r[2]*e[0],u=r[0]*e[3]-r[3]*e[0],i=r[1]*e[2]-r[2]*e[1],c=r[1]*e[3]-r[3]*e[1],f=r[2]*e[3]-r[3]*e[2],s=n[0],h=n[1],M=n[2],d=n[3];return t[0]=h*f-M*c+d*i,t[1]=-s*f+M*u-d*o,t[2]=s*c-h*u+d*a,t[3]=-s*i+h*o-M*a,t}function Pn(t,n,r,e){var a=n[0],o=n[1],u=n[2],i=n[3];return t[0]=a+e*(r[0]-a),t[1]=o+e*(r[1]-o),t[2]=u+e*(r[2]-u),t[3]=i+e*(r[3]-i),t}function wn(t,n){var r,e,a,o,u,i;n=n||1;do{u=(r=2*c()-1)*r+(e=2*c()-1)*e}while(u>=1);do{i=(a=2*c()-1)*a+(o=2*c()-1)*o}while(i>=1);var f=Math.sqrt((1-u)/i);return t[0]=n*r,t[1]=n*e,t[2]=n*a*f,t[3]=n*o*f,t}function Ln(t,n,r){var e=n[0],a=n[1],o=n[2],u=n[3];return t[0]=r[0]*e+r[4]*a+r[8]*o+r[12]*u,t[1]=r[1]*e+r[5]*a+r[9]*o+r[13]*u,t[2]=r[2]*e+r[6]*a+r[10]*o+r[14]*u,t[3]=r[3]*e+r[7]*a+r[11]*o+r[15]*u,t}function Cn(t,n,r){var e=n[0],a=n[1],o=n[2],u=r[0],i=r[1],c=r[2],f=r[3],s=f*e+i*o-c*a,h=f*a+c*e-u*o,M=f*o+u*a-i*e,d=-u*e-i*a-c*o;return t[0]=s*f+d*-u+h*-c-M*-i,t[1]=h*f+d*-i+M*-u-s*-c,t[2]=M*f+d*-c+s*-i-h*-u,t[3]=n[3],t}function An(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function Tn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function On(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function Rn(t,n){var r=t[0],e=t[1],a=t[2],o=t[3],i=n[0],c=n[1],f=n[2],s=n[3];return Math.abs(r-i)<=u*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(e-c)<=u*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(a-f)<=u*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-s)<=u*Math.max(1,Math.abs(o),Math.abs(s))}var En=en,In=an,qn=on,Dn=ln,jn=mn,Sn=vn,Fn=_n,Wn=function(){var t=Nt();return function(n,r,e,a,o,u){var i,c;for(r||(r=4),e||(e=0),c=a?Math.min(a*r+e,n.length):n.length,i=e;i<c;i+=r)t[0]=n[i],t[1]=n[i+1],t[2]=n[i+2],t[3]=n[i+3],o(t,t,u),n[i]=t[0],n[i+1]=t[1],n[i+2]=t[2],n[i+3]=t[3];return n}}();r.d(n,"pico_mercator_highPrecisionMat4",(function(){return Jn})),r.d(n,"pico_mercator_injectGLSLProjection",(function(){return Kn})),r.d(n,"pico_mercator_uniforms",(function(){return Nn})),r.d(n,"pico_mercator_mapboxViewMatrix",(function(){return Un})),r.d(n,"pico_mercator_mapboxProjectionMatrix",(function(){return $n})),r.d(n,"pico_mercator_pixelsPerMeter",(function(){return tr})),r.d(n,"pico_mercator_pixelsPerDegree",(function(){return nr})),r.d(n,"pico_mercator_lngLatToWorld",(function(){return rr})),r.d(n,"pico_mercator_worldToClip",(function(){return er})),r.d(n,"pico_mercator_lngLatToClip",(function(){return ar}));const zn=Math.PI,Zn=zn/4,Vn=zn/180,Qn=512,Xn=4003e4,Yn="\nconst float PICO_MERCATOR_TILE_SIZE = 512.0;\nconst float PICO_MERCATOR_PI = 3.1415926536;\nconst float PICO_MERCATOR_WORLD_SCALE = PICO_MERCATOR_TILE_SIZE / (PICO_MERCATOR_PI * 2.0);\n\nuniform vec2 pico_mercator_lngLatCenter;\nuniform vec3 pico_mercator_angleDerivatives;\nuniform vec2 pico_mercator_meterDerivatives;\nuniform float pico_mercator_scale;\nuniform vec4 pico_mercator_clipCenter;\nuniform mat4 pico_mercator_viewProjectionMatrix;\n\nvec4 pico_mercator_lngLatToWorld(vec3 lngLatElevation) {\n    vec2 mercatorPosition;\n    float elevation;\n    if (pico_mercator_scale < 2048.0) {\n        mercatorPosition = vec2(\n            (radians(lngLatElevation.x) + PICO_MERCATOR_PI) * PICO_MERCATOR_WORLD_SCALE,\n            (PICO_MERCATOR_PI + log(tan(PICO_MERCATOR_PI * 0.25 + radians(lngLatElevation.y) * 0.5))) * PICO_MERCATOR_WORLD_SCALE\n        );\n        elevation = lngLatElevation.z * pico_mercator_meterDerivatives.x;\n    } else {\n        mercatorPosition = lngLatElevation.xy - pico_mercator_lngLatCenter;\n        elevation = lngLatElevation.z * (pico_mercator_meterDerivatives.x + mercatorPosition.y * pico_mercator_angleDerivatives.y);\n        mercatorPosition = vec2(\n            mercatorPosition.x * pico_mercator_angleDerivatives.x,\n            mercatorPosition.y * (pico_mercator_angleDerivatives.y + mercatorPosition.y * pico_mercator_angleDerivatives.z)\n        );\n    }\n\n    return vec4(mercatorPosition, elevation, 1.0);\n}\n\nvec4 pico_mercator_lngLatToWorld(vec2 lngLat) {\n    return pico_mercator_lngLatToWorld(vec3(lngLat, 0.0));\n}\n\nvec4 pico_mercator_worldToClip(vec4 worldPosition) {\n    if (pico_mercator_scale >= 2048.0) {\n        worldPosition.w = 0.0;\n    }\n    vec4 clipPosition = pico_mercator_viewProjectionMatrix * worldPosition;\n    if (pico_mercator_scale >= 2048.0) {\n        clipPosition += pico_mercator_clipCenter;\n    }\n\n    return clipPosition;\n}\n\nvec4 pico_mercator_lngLatToClip(vec3 lngLatElevation) {\n    return pico_mercator_worldToClip(pico_mercator_lngLatToWorld(lngLatElevation));\n}\n\nvec4 pico_mercator_lngLatToClip(vec2 lngLat) {\n    return pico_mercator_worldToClip(pico_mercator_lngLatToWorld(lngLat));\n}\n\n";let kn=new Float64Array(4),Gn=new Float64Array(3),Bn=new Float64Array(3),Hn={pico_mercator_lngLatCenter:new Float32Array(2),pico_mercator_angleDerivatives:new Float32Array(3),pico_mercator_meterDerivatives:new Float32Array(2),pico_mercator_clipCenter:new Float32Array(4),pico_mercator_viewProjectionMatrix:new Float32Array(16),pico_mercator_scale:0};function Jn(){return e.identity(new Float64Array(16))}function Kn(t){let n=t.match(/#version \d+(\s+es)?\s*\n/),r=n?n[0]:"";return t.replace(r,r+Yn)}function Nn(t,n,r,a,o,u){Hn.pico_mercator_scale=Math.pow(2,r),Hn.pico_mercator_lngLatCenter[0]=t,Hn.pico_mercator_lngLatCenter[1]=n;let i=Math.cos(n*Vn),c=Vn*Math.tan(n*Vn)/i;!function(t,n,r,e){nr(t,n,r),t[2]=t[0]*e/2}(Hn.pico_mercator_angleDerivatives,n,i,c),function(t,n,r,e){t[0]=tr(n,r),t[1]=Qn/Xn*e}(Hn.pico_mercator_meterDerivatives,n,i,c),ar(Hn.pico_mercator_clipCenter,t,n,a,o),e.multiply(Hn.pico_mercator_viewProjectionMatrix,o,a),u(Hn)}function Un(t,n,r,o,u,i,c){let f=Math.pow(2,o);return e.identity(t),Gn[2]=-1.5*c,e.translate(t,t,Gn),e.rotateX(t,t,-u*Vn),e.rotateZ(t,t,i*Vn),Bn[0]=f,Bn[1]=f,Bn[2]=1,e.scale(t,t,Bn),rr(kn,n,r),e.translate(t,t,a.negate(kn,kn)),t}function $n(t,n,r,a,o=a){let u=1.5*a,i=n*Vn,c=Math.atan(1/3),f=Math.sin(c)*u/Math.sin(Math.PI/2-i-c),s=2*c,h=r/a,M=1.01*(Math.cos(Math.PI/2-i)*f+u);return e.perspective(t,s,h,o,M),t}function tr(t,n=Math.cos(t*Vn)){return Qn/Xn/n}function nr(t,n,r=Math.cos(n*Vn)){return t[0]=Qn/360,t[1]=t[0]/r,t}function rr(t,n,r){let e=r*Vn,a=Qn*(n*Vn+zn)/(2*zn),o=Qn*(zn+Math.log(Math.tan(Zn+.5*e)))/(2*zn);return t[0]=a,t[1]=o,t[2]=0,t[3]=1,t}function er(t,n,r,e){return o.transformMat4(kn,n,r),o.transformMat4(t,kn,e),t}function ar(t,n,r,e,a){return rr(kn,n,r),er(t,kn,e,a),t}}})}));
//# sourceMappingURL=pico-mercator.min.js.map